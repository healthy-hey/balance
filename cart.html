<!doctype html>
<!--[if lt IE 7]><html class="no-js ie6 oldie" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js ie7 oldie" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js ie8 oldie" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!-- Mirrored from www.beanstalkhairgrowth.com/cart by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 10 Jan 2021 19:46:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

<meta name="p:domain_verify" content="9933802b3c2e222316c25155bf70cc1e"/>

<!-- Pinterest Tag -->
<script>
!function(e){if(!window.pintrk){window.pintrk = function () {
window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var
  n=window.pintrk;n.queue=[],n.version="3.0";var
  t=document.createElement("script");t.async=!0,t.src=e;var
  r=document.getElementsByTagName("script")[0];
  r.parentNode.insertBefore(t,r)}}("../s.pinimg.com/ct/core.js");
pintrk('load', '2617912368977', {em: '<user_email_address>'});
pintrk('page');
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt=""
  src="https://ct.pinterest.com/v3/?event=init&amp;tid=2617912368977&amp;pd[em]=<hashed_email_address>&amp;noscript=1" />
</noscript>
<!-- end Pinterest Tag -->

<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"> 

<meta name="google-site-verification" content="qinmR78gR1k4HSk00fbXruQTRHgENVqh8z8qJVq5kOo" />
<meta name="google-site-verification" content="fIBW4hvwdml3s7w1We02EnzGnbSaS6r4Bi3sA8xbh1c" />
<meta name="google-site-verification" content="86wzm-oLaDyiEi9zm9SN6V98Rw5PnjAsQsN_bOBfx3c" />



<link rel="shortcut icon" href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/favicon5027.png?v=10823667377803014864" type="image/png" />

<meta charset="utf-8" />
<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' /><![endif]-->

<title>Your Shopping Cart &ndash; BeanStalk Hair Growth</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="canonical" href="cart.html" />



  <meta property="og:type" content="website" />
  <meta property="og:title" content="Your Shopping Cart" />
  
    <meta property="og:image" content="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/logoec46.png?v=17677759882692162813" />
    <meta property="og:image:secure_url" content="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/logoec46.png?v=17677759882692162813" />
  



<meta property="og:url" content="cart.html" />
<meta property="og:site_name" content="BeanStalk Hair Growth" />

  


<meta name="twitter:card" content="summary">


<link rel="stylesheet" href="../maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,300italic,700' rel='stylesheet' type='text/css'>

<link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/tea.scss01f8.css?v=6733420936737218360" rel="stylesheet" type="text/css" media="all" />


<link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/social-buttons.scssf257.css?v=8243589703111510902" rel="stylesheet" type="text/css" media="all" />
<link href="http://cdn.shopify.com/s/files/1/0970/9134/t/10/assets/styles.scss?v=1609832109192075178" rel="stylesheet" type="text/css" media="all" />
<link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/stylesheet184f.css?v=10778397167304481846" rel="stylesheet" type="text/css" media="all" />
  
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">

  
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">

  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/html5shivc762.js?v=10726887562710714894" type="text/javascript"></script>

  <script>window.performance && window.performance.mark && window.performance.mark('shopify.content_for_header.start');</script><meta id="shopify-digital-wallet" name="shopify-digital-wallet" content="/9709134/digital_wallets/dialog">
<meta name="shopify-checkout-api-token" content="c5955423dff78482961fd6ba80414d9d">
<link href="https://monorail-edge.shopifysvc.com/" rel="dns-prefetch">
<script id="apple-pay-shop-capabilities" type="application/json">{"shopId":9709134,"countryCode":"US","currencyCode":"USD","merchantCapabilities":["supports3DS"],"merchantId":"gid:\/\/shopify\/Shop\/9709134","merchantName":"BeanStalk Hair Growth","requiredBillingContactFields":["postalAddress","email"],"requiredShippingContactFields":["postalAddress","email"],"shippingType":"shipping","supportedNetworks":["visa","masterCard","amex","discover","jcb","elo"],"total":{"type":"pending","label":"BeanStalk Hair Growth","amount":"1.00"}}</script>
<script id="shopify-features" type="application/json">{"accessToken":"c5955423dff78482961fd6ba80414d9d","betas":["rich-media-storefront-analytics"],"domain":"www.beanstalkhairgrowth.com","predictiveSearch":true,"shopId":9709134,"smart_payment_buttons_url":"https:\/\/cdn.shopify.com\/shopifycloud\/payment-sheet\/assets\/latest\/spb.en.js","dynamic_checkout_cart_url":"https:\/\/cdn.shopify.com\/shopifycloud\/payment-sheet\/assets\/latest\/dynamic-checkout-cart.en.js","locale":"en"}</script>
<script>var Shopify = Shopify || {};
Shopify.shop = "www-beanstalkhairgrowth-com.myshopify.com";
Shopify.locale = "en";
Shopify.currency = {"active":"USD","rate":"1.0"};
Shopify.theme = {"name":"prev_qty_live-launchpad-star:9-5-2020","id":81408720963,"theme_store_id":null,"role":"main"};
Shopify.theme.handle = "null";
Shopify.theme.style = {"id":null,"handle":null};
Shopify.cdnHost = "cdn.shopify.com";</script>
<script type="module">!function(o){(o.Shopify=o.Shopify||{}).modules=!0}(window);</script>
<script>!function(o){function n(){var o=[];function n(){o.push(Array.prototype.slice.apply(arguments))}return n.q=o,n}var t=o.Shopify=o.Shopify||{};t.loadFeatures=n(),t.autoloadFeatures=n()}(window);</script>
<script>window.ShopifyPay = window.ShopifyPay || {};
window.ShopifyPay.apiHost = "pay.shopify.com";</script>
<script>(function() {
  function asyncLoad() {
    var urls = ["\/\/code.tidio.co\/yatavqycuhz3emwdxmwdcji9hzaym5iu.js?shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/wheelio-a62f3.firebaseapp.com\/scripttag.js?shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/hurrifyme.com\/shopify\/app\/counter\/counter_app.js?shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/cdn.refersion.com\/pixel.js?shop=www-beanstalkhairgrowth-com.myshopify.com\u0026client_id=21342\u0026pk=pub_923c8ea850517e26c502\u0026shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/cdn.shopifycloud.com\/messenger_commerce\/assets\/new_message_us?version=1517348845\u0026page_id=\u0026color=\u0026size=\u0026position_horizontal=\u0026position_vertical=\u0026messenger_app_id=1163199097047119\u0026shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/cdn.judge.me\/assets\/installed.js?shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/static.klaviyo.com\/onsite\/js\/klaviyo.js?company_id=Acjzsf\u0026shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/d3g420rgevyqxw.cloudfront.net\/cffPCLoader_min.js?shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/cdn.shopify.com\/s\/files\/1\/0970\/9134\/t\/6\/assets\/postscript-sdk.js?v=1598887058\u0026shopId=9996\u0026shop=www-beanstalkhairgrowth-com.myshopify.com","cart.html\/\/load.fomo.com\/api\/v1\/yg06SKdsWNKDbMle0Ebofg\/load.js?shop=www-beanstalkhairgrowth-com.myshopify.com","https:\/\/funnelbuildrapp.com\/app\/funnel_v2_js\/?shop=www-beanstalkhairgrowth-com.myshopify.com"];
    for (var i = 0; i < urls.length; i++) {
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = urls[i];
      var x = document.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    }
  };
  if(window.attachEvent) {
    window.attachEvent('onload', asyncLoad);
  } else {
    window.addEventListener('load', asyncLoad, false);
  }
})();</script>
<script id="__st">var __st={"a":9709134,"offset":-18000,"reqid":"5de23846-55f6-4fa7-b913-42b46e8f286e","pageurl":"www.beanstalkhairgrowth.com\/cart","u":"004d4ca98a53"};</script>
<script>window.ShopifyPaypalV4VisibilityTracking = true;</script>
<script>window.ShopifyAnalytics = window.ShopifyAnalytics || {};
window.ShopifyAnalytics.meta = window.ShopifyAnalytics.meta || {};
window.ShopifyAnalytics.meta.currency = 'USD';
var meta = {"page":{}};
for (var attr in meta) {
  window.ShopifyAnalytics.meta[attr] = meta[attr];
}</script>
<script>window.ShopifyAnalytics.merchantGoogleAnalytics = function() {
  
};
</script>
<script class="analytics">(window.gaDevIds=window.gaDevIds||[]).push('BwiEti');


(function () {
  var customDocumentWrite = function(content) {
    var jquery = null;

    if (window.jQuery) {
      jquery = window.jQuery;
    } else if (window.Checkout && window.Checkout.$) {
      jquery = window.Checkout.$;
    }

    if (jquery) {
      jquery('body').append(content);
    }
  };

  var hasLoggedConversion = function(token) {
    if (document.cookie.indexOf('loggedConversion=' + window.location.pathname) !== -1) {
      return true;
    }
    if (token) {
      return document.cookie.indexOf('loggedConversion=' + token) !== -1;
    }
    return false;
  }

  var setCookieIfConversion = function(token) {
    if (token) {
      var twoMonthsFromNow = new Date(Date.now());
      twoMonthsFromNow.setMonth(twoMonthsFromNow.getMonth() + 2);

      document.cookie = 'loggedConversion=' + token + '; expires=' + twoMonthsFromNow;
    }
  }

  var trekkie = window.ShopifyAnalytics.lib = window.trekkie = window.trekkie || [];
  if (trekkie.integrations) {
    return;
  }
  trekkie.methods = [
    'identify',
    'page',
    'ready',
    'track',
    'trackForm',
    'trackLink'
  ];
  trekkie.factory = function(method) {
    return function() {
      var args = Array.prototype.slice.call(arguments);
      args.unshift(method);
      trekkie.push(args);
      return trekkie;
    };
  };
  for (var i = 0; i < trekkie.methods.length; i++) {
    var key = trekkie.methods[i];
    trekkie[key] = trekkie.factory(key);
  }
  trekkie.load = function(config) {
    trekkie.config = config;
    var first = document.getElementsByTagName('script')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.onerror = function(e) {
      var scriptFallback = document.createElement('script');
      scriptFallback.type = 'text/javascript';
      scriptFallback.onerror = function(error) {
              var Monorail = {
      produce: function produce(monorailDomain, schemaId, payload) {
        var currentMs = new Date().getTime();
        var event = {
          schema_id: schemaId,
          payload: payload,
          metadata: {
            event_created_at_ms: currentMs,
            event_sent_at_ms: currentMs
          }
        };
        return Monorail.sendRequest("https://" + monorailDomain + "/v1/produce", JSON.stringify(event));
      },
      sendRequest: function sendRequest(endpointUrl, payload) {
        // Try the sendBeacon API
        if (window && window.navigator && typeof window.navigator.sendBeacon === 'function' && typeof window.Blob === 'function' && !Monorail.isIos12()) {
          var blobData = new window.Blob([payload], {
            type: 'text/plain'
          });
    
          if (window.navigator.sendBeacon(endpointUrl, blobData)) {
            return true;
          } // sendBeacon was not successful
    
        } // XHR beacon   
    
        var xhr = new XMLHttpRequest();
    
        try {
          xhr.open('POST.html', endpointUrl);
          xhr.setRequestHeader('Content-Type', 'text/plain');
          xhr.send(payload);
        } catch (e) {
          console.log(e);
        }
    
        return false;
      },
      isIos12: function isIos12() {
        return window.navigator.userAgent.lastIndexOf('iPhone; CPU iPhone OS 12_') !== -1 || window.navigator.userAgent.lastIndexOf('iPad; CPU OS 12_') !== -1;
      }
    };
    Monorail.produce('monorail-edge.shopifysvc.com',
      'trekkie_storefront_load_errors/1.1',
      {shop_id: 9709134,
      theme_id: 81408720963,
      app_name: "storefront",
      context_url: window.location.href,
      source_url: "https://cdn.shopify.com/s/trekkie.storefront.3b995b76a9cba1a19760ed489f09098cd04caaab.min.js"});

      };
      scriptFallback.async = true;
      scriptFallback.src = '../cdn.shopify.com/s/trekkie.storefront.3b995b76a9cba1a19760ed489f09098cd04caaab.min.js';
      first.parentNode.insertBefore(scriptFallback, first);
    };
    script.async = true;
    script.src = '../cdn.shopify.com/s/trekkie.storefront.3b995b76a9cba1a19760ed489f09098cd04caaab.min.js';
    first.parentNode.insertBefore(script, first);
  };
  trekkie.load(
    {"Trekkie":{"appName":"storefront","development":false,"defaultAttributes":{"shopId":9709134,"isMerchantRequest":null,"themeId":81408720963,"themeCityHash":"17975051740401756387","contentLanguage":"en","currency":"USD"},"isServerSideCookieWritingEnabled":true,"isPixelGateEnabled":true},"Performance":{"navigationTimingApiMeasurementsEnabled":true,"navigationTimingApiMeasurementsSampleRate":1},"Google Analytics":{"trackingId":"UA-65330087-1","domain":"auto","siteSpeedSampleRate":"10","enhancedEcommerce":true,"doubleClick":true,"includeSearch":true},"Session Attribution":{}}
  );

  var loaded = false;
  trekkie.ready(function() {
    if (loaded) return;
    loaded = true;

    window.ShopifyAnalytics.lib = window.trekkie;
    
      ga('require', 'linker');
      function addListener(element, type, callback) {
        if (element.addEventListener) {
          element.addEventListener(type, callback);
        }
        else if (element.attachEvent) {
          element.attachEvent('on' + type, callback);
        }
      }
      function decorate(event) {
        event = event || window.event;
        var target = event.target || event.srcElement;
        if (target && (target.getAttribute('action') || target.getAttribute('href'))) {
          ga(function (tracker) {
            var linkerParam = tracker.get('linkerParam');
            document.cookie = '_shopify_ga=' + linkerParam + '; ' + 'path=/';
          });
        }
      }
      addListener(window, 'load', function(){
        for (var i=0; i < document.forms.length; i++) {
          var action = document.forms[i].getAttribute('action');
          if(action && action.indexOf('/cart') >= 0) {
            addListener(document.forms[i], 'submit', decorate);
          }
        }
        for (var i=0; i < document.links.length; i++) {
          var href = document.links[i].getAttribute('href');
          if(href && href.indexOf('/checkout') >= 0) {
            addListener(document.links[i], 'click', decorate);
          }
        }
      });
    

    var originalDocumentWrite = document.write;
    document.write = customDocumentWrite;
    try { window.ShopifyAnalytics.merchantGoogleAnalytics.call(this); } catch(error) {};
    document.write = originalDocumentWrite;
      (function () {
        if (window.BOOMR && (window.BOOMR.version || window.BOOMR.snippetExecuted)) {
          return;
        }
        window.BOOMR = window.BOOMR || {};
        window.BOOMR.snippetStart = new Date().getTime();
        window.BOOMR.snippetExecuted = true;
        window.BOOMR.snippetVersion = 12;
        window.BOOMR.application = "storefront-renderer";
        window.BOOMR.themeName = "";
        window.BOOMR.themeVersion = "";
        window.BOOMR.shopId = 9709134;
        window.BOOMR.themeId = 81408720963;
        window.BOOMR.url =
          "../cdn.shopify.com/shopifycloud/boomerang/shopify-boomerang-1.0.0.min.js";
        var where = document.currentScript || document.getElementsByTagName("script")[0];
        var parentNode = where.parentNode;
        var promoted = false;
        var LOADER_TIMEOUT = 3000;
        function promote() {
          if (promoted) {
            return;
          }
          var script = document.createElement("script");
          script.id = "boomr-scr-as";
          script.src = window.BOOMR.url;
          script.async = true;
          parentNode.appendChild(script);
          promoted = true;
        }
        function iframeLoader(wasFallback) {
          promoted = true;
          var dom, bootstrap, iframe, iframeStyle;
          var doc = document;
          var win = window;
          window.BOOMR.snippetMethod = wasFallback ? "if" : "i";
          bootstrap = function(parent, scriptId) {
            var script = doc.createElement("script");
            script.id = scriptId || "boomr-if-as";
            script.src = window.BOOMR.url;
            BOOMR_lstart = new Date().getTime();
            parent = parent || doc.body;
            parent.appendChild(script);
          };
          if (!window.addEventListener && window.attachEvent && navigator.userAgent.match(/MSIE [67]./)) {
            window.BOOMR.snippetMethod = "s";
            bootstrap(parentNode, "boomr-async");
            return;
          }
          iframe = document.createElement("IFRAME");
          iframe.src = "about:blank";
          iframe.title = "";
          iframe.role = "presentation";
          iframe.loading = "eager";
          iframeStyle = (iframe.frameElement || iframe).style;
          iframeStyle.width = 0;
          iframeStyle.height = 0;
          iframeStyle.border = 0;
          iframeStyle.display = "none";
          parentNode.appendChild(iframe);
          try {
            win = iframe.contentWindow;
            doc = win.document.open();
          } catch (e) {
            dom = document.domain;
            iframe.src = "javascript:var d=document.open();d.domain='" + dom + "';void(0);";
            win = iframe.contentWindow;
            doc = win.document.open();
          }
          if (dom) {
            doc._boomrl = function() {
              this.domain = dom;
              bootstrap();
            };
            doc.write("<body onload='document._boomrl();'>");
          } else {
            win._boomrl = function() {
              bootstrap();
            };
            if (win.addEventListener) {
              win.addEventListener("load", win._boomrl, false);
            } else if (win.attachEvent) {
              win.attachEvent("onload", win._boomrl);
            }
          }
          doc.close();
        }
        var link = document.createElement("link");
        if (link.relList &&
          typeof link.relList.supports === "function" &&
          link.relList.supports("preload") &&
          ("as" in link)) {
          window.BOOMR.snippetMethod = "p";
          link.href = window.BOOMR.url;
          link.rel = "preload";
          link.as = "script";
          link.addEventListener("load", promote);
          link.addEventListener("error", function() {
            iframeLoader(true);
          });
          setTimeout(function() {
            if (!promoted) {
              iframeLoader(true);
            }
          }, LOADER_TIMEOUT);
          BOOMR_lstart = new Date().getTime();
          parentNode.appendChild(link);
        } else {
          iframeLoader(false);
        }
        function boomerangSaveLoadTime(e) {
          window.BOOMR_onload = (e && e.timeStamp) || new Date().getTime();
        }
        if (window.addEventListener) {
          window.addEventListener("load", boomerangSaveLoadTime, false);
        } else if (window.attachEvent) {
          window.attachEvent("onload", boomerangSaveLoadTime);
        }
        if (document.addEventListener) {
          document.addEventListener("onBoomerangLoaded", function(e) {
            e.detail.BOOMR.init({
              producer_url: "https://monorail-edge.shopifysvc.com/v1/produce",
              ResourceTiming: {
                enabled: true,
                trackedResourceTypes: ["script", "img", "css"]
              },
            });
            e.detail.BOOMR.t_end = new Date().getTime();
          });
        } else if (document.attachEvent) {
          document.attachEvent("onpropertychange", function(e) {
            if (!e) e=event;
            if (e.propertyName === "onBoomerangLoaded") {
              e.detail.BOOMR.init({
                producer_url: "https://monorail-edge.shopifysvc.com/v1/produce",
                ResourceTiming: {
                  enabled: true,
                  trackedResourceTypes: ["script", "img", "css"]
                },
              });
              e.detail.BOOMR.t_end = new Date().getTime();
            }
          });
        }
      })();
    

    
        window.ShopifyAnalytics.lib.page(
          null,
          {}
        );
      

    var match = window.location.pathname.match(/checkouts\/(.+)\/(thank_you|post_purchase)/)
    var token = match? match[1]: undefined;
    if (!hasLoggedConversion(token)) {
      setCookieIfConversion(token);
      
    }
  });

  
      var eventsListenerScript = document.createElement('script');
      eventsListenerScript.async = true;
      eventsListenerScript.src = "../cdn.shopify.com/shopifycloud/shopify/assets/shop_events_listener-68ba3f1321f00bf07cb78a03841621079812265e950cdccade3463749ea2705e.js";
      document.getElementsByTagName('head')[0].appendChild(eventsListenerScript);
    
})();</script>
<script>!function(e){e.addEventListener("DOMContentLoaded",function(){var t;null!==e.querySelector('form[action^="/contact"] input[name="form_type"][value="contact"]')&&(window.Shopify=window.Shopify||{},window.Shopify.recaptchaV3=window.Shopify.recaptchaV3||{siteKey:"6LcCR2cUAAAAANS1Gpq_mDIJ2pQuJphsSQaUEuc9"},(t=e.createElement("script")).setAttribute("src","../cdn.shopify.com/shopifycloud/storefront-recaptcha-v3/v0.1/index.js"),e.body.appendChild(t))})}(document);</script>
<script integrity="sha256-JP8SIsmqE7shdlPA0+ooxAp5aigObaKa1CHuwqYHXIY=" data-source-attribution="shopify.loadfeatures" defer="defer" src="../cdn.shopify.com/shopifycloud/shopify/assets/storefront/load_feature-24ff1222c9aa13bb217653c0d3ea28c40a796a280e6da29ad421eec2a6075c86.js" crossorigin="anonymous"></script>
<script crossorigin="anonymous" defer="defer" src="../cdn.shopify.com/shopifycloud/shopify/assets/shopify_pay/storefront-21b5dddfc8b64c1ad68cee3ba7448d1ffa15c24e969ebc1fbccf1a3784b659ad99c2.js?v=20190107"></script>
<script integrity="sha256-h+g5mYiIAULyxidxudjy/2wpCz/3Rd1CbrDf4NudHa4=" data-source-attribution="shopify.dynamic-checkout" defer="defer" src="../cdn.shopify.com/shopifycloud/shopify/assets/storefront/features-87e8399988880142f2c62771b9d8f2ff6c290b3ff745dd426eb0dfe0db9d1dae.js" crossorigin="anonymous"></script>


<style id="shopify-dynamic-checkout-cart">@media screen and (min-width: 750px) {
  #dynamic-checkout-cart {
    min-height: 50px;
  }
}

@media screen and (max-width: 750px) {
  #dynamic-checkout-cart {
    min-height: 60px;
  }
}
</style><script>window.performance && window.performance.mark && window.performance.mark('shopify.content_for_header.end');</script>

  <script src="../ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script> 
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/owl.carouselb596.js?v=16414960863540295069" type="text/javascript"></script>

  <link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/mtree1434.css?v=5278999526883330515" rel="stylesheet" type="text/css" media="all" />
    <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/mtree7311.js?v=449150722443313993" type="text/javascript"></script>

  
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery-migrate-1.2.0.mina477.js?v=2391154783318405197" type="text/javascript"></script>

  <script src="../cdn.shopify.com/shopifycloud/shopify/assets/themes_support/option_selection-fe6b72c2bbdd3369ac0bfefe8648e3c889efca213baefd4cfb0dd9363563831f.js" type="text/javascript"></script>
  <script src="../cdn.shopify.com/shopifycloud/shopify/assets/themes_support/api.jquery-e94e010e92e659b566dbc436fdfe5242764380e00398907a14955ba301a4749f.js" type="text/javascript"></script>

  <link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery.flipster.min2fdc.css?v=16917984436990789469" rel="stylesheet" type="text/css" media="all" />



    <link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/owl.carousel5327.css?v=10364054669972473265" rel="stylesheet" type="text/css" media="all" />
    <link href="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/owl.theme.defaultf380.css?v=3460530028029630867" rel="stylesheet" type="text/css" media="all" />
    



  
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/scripts11e5.js?v=5994970708437742566" type="text/javascript"></script>
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/social-buttons791a.js?v=1132125814297187719" type="text/javascript"></script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TLD8CJ7');</script>
<!-- End Google Tag Manager -->

<script src="../apis.google.com/js/platform290a.js?onload=renderOptIn" async defer></script>

<script>
  window.renderOptIn = function() {
    window.gapi.load('surveyoptin', function() {
      window.gapi.surveyoptin.render(
        {
          // REQUIRED FIELDS
          "merchant_id": 118481953,
          "order_id": "ORDER_ID",
          "email": "CUSTOMER_EMAIL",
          "delivery_country": "COUNTRY_CODE",
          "estimated_delivery_date": "YYYY-MM-DD",

          // OPTIONAL FIELDS
          "products": [{"gtin":"GTIN1"}, {"gtin":"GTIN2"}]
        });
    });
  }
</script>

<script src="../apis.google.com/js/platforme200.js?onload=renderBadge" async defer></script>

<script>
  window.renderBadge = function() {
    var ratingBadgeContainer = document.createElement("div");
    document.body.appendChild(ratingBadgeContainer);
    window.gapi.load('ratingbadge', function() {
      window.gapi.ratingbadge.render(ratingBadgeContainer, {"merchant_id": 118481953});
    });
  }
</script>


<script>(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"56000030"};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","../bat.bing.com/bat.js","uetq");</script>

<!-- Snap Pixel Code -->
<script type='text/javascript'>
(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()
{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};
a.queue=[];var s='script';r=t.createElement(s);r.async=!0;
r.src=n;var u=t.getElementsByTagName(s)[0];
u.parentNode.insertBefore(r,u);})(window,document,
'../sc-static.net/scevent.min.js');

snaptr('init', '7cc193c4-4d96-40a3-8bc4-5c7782a46fee', {
'user_email': '__INSERT_USER_EMAIL__'
});

snaptr('track', 'PAGE_VIEW');

</script>
<!-- End Snap Pixel Code -->





<script type="application/ld+json">
{
	"@context":"http://schema.org",
	"@type":"HealthAndBeautyBusiness",
	"url":"http://www.beanstalkhairgrowth.com",
        "logo":"https://cdn.shopify.com/s/files/1/0970/9134/t/1/assets/logo.png?3232308873977686514",
        "image":"https://cdn.shopify.com/s/files/1/0970/9134/t/1/assets/slideshow_3.jpg?3232308873977686514",
        "description": "2 Week Hair Growth Results For Thinning Edges.",
        "telephone":"404-981-5380",
        "priceRange" : "$16.99 - $699",
        "address": {
"@type": "PostalAddress",
"addressLocality": "McDonough",
"addressRegion": "GA",
"postalCode":"30253",
"streetAddress": "1156 McDonough Parkway"
},

	"sameAs":[
		"https://beanstalk-hair-growth.tumblr.com/",
		"https://beanstalkhairgrowthvitamin.wordpress.com/",
		"https://www.evernote.com/pub/beanstalkhairgrowth/notes",
		"https://1drv.ms/o/s!Audh9ks_AtpeaWw-ev73vhMPtyk",
		"http://beanstalkhairgrowth.newsblur.com/",
		"https://www.diigo.com/profile/beanstalkproduct",
		"https://twitter.com/beanstalkhair",
		"https://www.instapaper.com/folder/3381880/rss/6017122/9Wa2O8nDJn3Y8qs3PxsWn9pH38",
		"https://beanstalk-hair-growth.blogspot.com/",
		"https://drive.google.com/drive/folders/0B0N_F7wJpAD0WGl0UFNnX2JHSEk",
		"https://getpocket.com/users/beanstalkhairgrowth/feed/all",
		"https://nimbus.everhelper.me/client/notes/share/1050547/tadvr0lsuq4emcozmb0t",
		"https://trello.com/beanstalkhairgrowth",
"http://beanstalkhairgrowth.weebly.com/",
                "https://www.pinterest.com/beanstalkhairgrowth/",
                "https://plus.google.com/+BeanstalkHairgrowthvitaminsforhairgrowth",
                "https://www.facebook.com/BeanStalk.Hair.Loss.Treatment",
                "https://www.youtube.com/user/BeanStalkHairgrowth",
                "https://plus.google.com/u/0/+BeanstalkHairgrowthvitaminsforhairgrowth",
                "http://beanstalkhairgrowth.postach.io/"
	],
	"founder": [ {
		"@type": "Person",
		"name": "Mary Smith"
		
	}

],

	"name":"BeanStalk HairGrowth Products LLC"
}


<script>
  (function() {
/* Begin rx's Discount Autofill Code */
/* Read the Query String value from the URL */    
/* Link: http://stackoverflow.com/a/2880929 - Notes: No clue how this regex stuff works. Probably fairy magic.  */
    var urlParams;
    (window.onpopstate = function () {
        var match,
            pl     = /\+/g,  // Regex for replacing addition symbol with a space
            search = /([^&=]+)=?([^&]*)/g,
            decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
            query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
    urlParams[decode(match[1])] = decode(match[2]);
    })();

/* If the value of the hidden discount input field is blank, undefined or null then set the contents of localstorage discount to be the result of our Query String function above */    
    if ($("#discount_input").val() == ('' || undefined || null || 'undefined')) {
    /* Set sessionStorage variable "discount" to the result of our Query string function above */
       sessionStorage.setItem("discount", urlParams["discount"]);
    }

/* If the value in our hidden input field doesnâ€™t match the result of our Query String function above then clear the current sessionStorage value for "discount" and replace it with the new one */
/* Link: http://stackoverflow.com/q/19844750 */
    else if ($("#discount_input").val() != urlParams["discount"]) {
       sessionStorage.removeItem("discount");
       sessionStorage.setItem("discount", urlParams["discount"]);
    }    
/* End rx's Discount Autofill Code */
  }());

</script>


  
<!-- Start of Judge.me Core -->
<link rel="dns-prefetch" href="https://cdn.judge.me/">
<script data-cfasync='false' class='jdgm-settings-script'>window.jdgmSettings={"pagination":5,"hide_badge_preview_if_no_reviews":true,"verified_badge_placement":"left-of-reviewer-name","widget_location_format":"country_iso_code","all_reviews_include_out_of_store_products":true,"add_json_ld_snippet_on_all_reviews_page":true,"preview_badge_collection_page_install_preference":true,"preview_badge_product_page_install_preference":true,"review_widget_install_preference":"above-related","platform":"shopify","reply_name":"BeanStalk Hair Growth","footer":true,"autopublish":true,"review_dates":true,"enable_custom_form":false};</script> <style class='jdgm-settings-style'>.jdgm-xx{left:0}.jdgm-prev-badge[data-average-rating='0.00']{display:none !important}.jdgm-author-all-initials{display:none !important}.jdgm-author-last-initial{display:none !important}.jdgm-rev__replier:before{content:'beanstalkhairgrowth.com'}.jdgm-rev__prod-link-prefix:before{content:'about'}.jdgm-rev__out-of-store-text:before{content:'(out of store)'}@media only screen and (min-width: 768px){.jdgm-rev__pics .jdgm-rev_all-rev-page-picture-separator,.jdgm-rev__pics .jdgm-rev__product-picture{display:none}}@media only screen and (max-width: 768px){.jdgm-rev__pics .jdgm-rev_all-rev-page-picture-separator,.jdgm-rev__pics .jdgm-rev__product-picture{display:none}}.jdgm-preview-badge[data-template="index"]{display:none !important}.jdgm-verified-count-badget[data-from-snippet="true"]{display:none !important}.jdgm-carousel-wrapper[data-from-snippet="true"]{display:none !important}.jdgm-all-reviews-text[data-from-snippet="true"]{display:none !important}
</style>

  
  
  
  <style class='jdgm-miracle-styles'>
  @-webkit-keyframes jdgm-spin{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);-ms-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes jdgm-spin{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);-ms-transform:rotate(359deg);transform:rotate(359deg)}}@font-face{font-family:'JudgemeStar';src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAScAA0AAAAABrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEgAAAABoAAAAcbyQ+3kdERUYAAARgAAAAHgAAACAAMwAGT1MvMgAAAZgAAABGAAAAVi+vS9xjbWFwAAAB8AAAAEAAAAFKwBMjvmdhc3AAAARYAAAACAAAAAj//wADZ2x5ZgAAAkAAAAEJAAABdH33LXtoZWFkAAABMAAAAC0AAAA2BroQKWhoZWEAAAFgAAAAHAAAACQD5QHQaG10eAAAAeAAAAAPAAAAFAYAAABsb2NhAAACMAAAAA4AAAAOAO4AeG1heHAAAAF8AAAAHAAAACAASgAvbmFtZQAAA0wAAADeAAABkorWfVZwb3N0AAAELAAAACkAAABEp3ubLXgBY2BkYADhPPP4OfH8Nl8ZuJkYQODS2fRrCPr/aSYGxq1ALgcDWBoAO60LkwAAAHgBY2BkYGDc+v80gx4TAwgASaAICmABAFB+Arl4AWNgZGBgYGPQYWBiAAIwyQgWc2AAAwAHVQB6eAFjYGRiYJzAwMrAwejDmMbAwOAOpb8ySDK0MDAwMbByMsCBAAMCBKS5pjA4PGB4wMR44P8BBj3GrQymQGFGkBwAjtgK/gAAeAFjYoAAEA1jAwAAZAAHAHgB3crBCcAwDEPRZydkih567CDdf4ZskmLwFBV8xBfCaC4BXkOUmx4sU0h2ngNb9V0vQCxaRKIAevT7fGWuBrEAAAAAAAAAAAA0AHgAugAAeAF9z79Kw1AUx/FzTm7un6QmJtwmQ5Bg1abgEGr/BAqlU6Gju+Cgg1MkQ/sA7Vj7BOnmO/gUvo2Lo14NqIO6/IazfD8HEODtmQCfoANwNsyp2/GJt3WKQrd1NLiYYWx2PBqOsmJMEOznPOTzfSCrhAtbbLdmeFLJV9eKd63WLrZcIcuaEVdssWCKM6pLCfTVOYbz/0pNSMSZKLIZpvh78sAUH6PlMrreTCabP9r+Z/puPZ2ur/RqpQHgh+MIegCnXeM4MRAPjYN//5tj4ZtTjkFqEdmeMShlEJ7tVAly2TAkx6R68Fl4E/aVvn8JqHFQ4JS1434gXKcuL31dDhzs3YbsEOAd/IU88gAAAHgBfY4xTgMxEEVfkk0AgRCioKFxQYd2ZRtpixxgRU2RfhU5q5VWseQ4JdfgAJyBlmNwAM7ABRhZQ0ORwp7nr+eZAa54YwYg9zm3ynPOeFRe8MCrciXOh/KSS76UV5L/iDmrLiS5AeU519wrL3jmSbkS5115yR2fyivJv9kx0ZMZ2RLZw27q87iNQi8EBo5FSPIMw3HqBboi5lKTGAGDp8FKXWP+t9TU01Lj5His1Ba6uM9dTEMwvrFmbf5GC/q2drW3ruXUhhsCiQOjznFlCzYhHUZp4xp76vsvQh89CQAAeAFjYGJABowM6IANLMrEyMTIzMjCXpyRWJBqZshWXJJYBKOMAFHFBucAAAAAAAAB//8AAngBY2BkYGDgA2IJBhBgAvKZGViBJAuYxwAABJsAOgAAeAFjYGBgZACCk535hiD60tn0azAaAEqpB6wAAA==") format("woff");font-weight:normal;font-style:normal}.jdgm-star{font-family:'JudgemeStar';display:inline !important;text-decoration:none !important;padding:0 4px 0 0 !important;margin:0 !important;font-weight:bold;opacity:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.jdgm-star:hover{opacity:1}.jdgm-star:last-of-type{padding:0 !important}.jdgm-star.jdgm--on:before{content:"\e000"}.jdgm-star.jdgm--off:before{content:"\e001"}.jdgm-star.jdgm--half:before{content:"\e002"}.jdgm-widget *{margin:0;line-height:1.4;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch}.jdgm-hidden{display:none !important;visibility:hidden !important}.jdgm-temp-hidden{display:none}.jdgm-spinner{width:40px;height:40px;margin:auto;border-radius:50%;border-top:2px solid #eee;border-right:2px solid #eee;border-bottom:2px solid #eee;border-left:2px solid #ccc;-webkit-animation:jdgm-spin 0.8s infinite linear;animation:jdgm-spin 0.8s infinite linear}.jdgm-prev-badge{display:block !important}

</style>


  
  
   
<script data-cfasync="false" type="text/javascript" async src="../cdn.judge.me/shopify_v2.js"></script>
<link rel="stylesheet" type="text/css" media="nope!" href="../cdn.judge.me/shopify_v2.css"
      onload="this.media='all',function(){var d=document,e=d.createEvent('Event');e.initEvent('jdgm.doneLoadingCss',!0,!0),d.dispatchEvent(e)}();">
<noscript><link rel="stylesheet" type="text/css" media="all" href="../cdn.judge.me/shopify_v2.css"></noscript>
<!-- End of Judge.me Core -->


  
<style>.additional-checkout-button--paypal{ display: none !important; }.shopify-payment-button__button--branded{ display: none !important; }.additional_checkout_buttons{ display: none !important; }</style></head>

<body class="template-cart">
  
<!-- BEGIN: Autofill Discount via URL, with IIFE. PART 2 -->
<!-- Our hidden input that stores the discount code value -->
<input id="discount_input" type="hidden" name="discount" value="my30">

<!-- Set the value of our hidden input field #discount-input to the value of our sessionStorage "discount" Variable -->
<script>

  (function() {
	document.getElementById("discount_input").value = sessionStorage.getItem("discount");
  }());

</script>
<!-- END: Autofill Discount via URL, with IIFE. PART 2 -->

  
  
  
<a id="tr9g-6as6upcjk4dr9amvbzqtwp74" style="cursor: default; position: absolute; bottom: 4px; left: 4px;" href="https://docs.google.com/forms/d/e/1FAIpQLSdsQ5qnnCN__Cd34YyjNXcSavankM6CoYf4QTW_SuwK6PNjNQ/viewform" rel="nofollow" class="external"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="> </a>  
  
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TLD8CJ7"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
<script type="text/javascript">
  var _learnq = _learnq || [];

  _learnq.push(['account', 'Acjzsf']);

  (function () {
  var b = document.createElement('script'); b.type = 'text/javascript'; b.async = true;
  b.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'a.klaviyo.com/media/js/analytics/analytics.js';
  var a = document.getElementsByTagName('script')[0]; a.parentNode.insertBefore(b, a);
  })();
</script>
    
<!-- Begin toolbar -->

  
<!-- Begin Mobile Nav -->
  
<div class="row mobile-nav-wrapper">
  <nav class="mobile clearfix"> <div class="flyout" style="display:none;">
  <ul class="clearfix">
    
    
    <li>
      <a href="index.html" class=" navlink"><span>Home</span></a>
    </li>
    
    
    
    <li>
      <a href="pages/about-us.html" class=" navlink"><span>About Us</span></a>
    </li>
    
    
    
    <li>
      <a href="collections/frontpage.html" class=" navlink"><span>Products</span></a>
    </li>
    
    
    
    <li>
      <a href="pages/reviews.html" class=" navlink"><span>Reviews</span></a>
    </li>
    
    
    
    <li>
      <a href="blogs/news.html" class=" navlink"><span>Blog</span></a>
    </li>
    
    
    
    <li>
    <span class="more"><i class="fa fa-plus"></i></span>
      <a href="pages/contact.html" class=" navlink"><span>Contact</span></a>
      <ul class="sub-menu">
        
        <li><a href="pages/disclaimer-policy.html" class="   navlink">Disclaimer Policy</a></li>
        
        <li><a href="pages/legal-policy.html" class="   navlink">Legal Policy</a></li>
        
        <li><a href="pages/privacy-policy.html" class="   navlink">Privacy Policy</a></li>
        
        <li><a href="pages/shipping-policy.html" class="   navlink">Shipping Policy</a></li>
        
        <li><a href="pages/return-policy.html" class="   navlink">Return Policy</a></li>
        
        <li><a href="pages/terms-and-conditions.html" class=" last    navlink">Terms and Conditions</a></li>
        
      </ul>
    </li>
    
    

    
      
        <li class="customer-links"><a href="account/login.html" id="customer_login_link">Log in</a></li>
        
        <li class="customer-links"><a href="account/register.html" id="customer_register_link">Create an account</a></li>
        
      
    

    <li class="search-field">
      <form class="search" action="https://www.beanstalkhairgrowth.com/search" id="search">
        <input type="image" src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/icon-searchbdee.png?v=4042546176467256943" alt="Go" id="go" class="go" />
        <input type="text" name="q" class="search_box" placeholder="Search" value="" />
      </form>
    </li>
  </ul>
</div>
 </nav>
</div>
  
<!-- End Mobile Nav --> 


<div class="cartlogo"><div class="cartpagelogo"><a href="index.html"><img src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/logoec46.png?v=17677759882692162813" alt="BeanStalk Hair Growth" /></a></div></div>


<!-- Begin wrapper -->
<div id="transparency" class="wrapper clearfix">
     
     <div class="row p0">
       <div class="header-inner">
    
    <!-- Begin navigation --> 
    
       <div class="wrapper">
    <div class="span12 header clearfix">
		
    </div>
       </div>
        <div class="cart-notification js-focus-hidden" style="display:none;" tabindex="-1">
  <div class="cart-notification__title-bar">
    <div class="cart-notification__title">
      <svg width="16" height="10" stroke-width="1.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
        <path d="M1.5 6.5l3 3l7-7"></path>
      </svg>
      1 Item Added to Your Bag
    </div>
    <button type="button" class="cart-notification__closer">
      <svg width="51" height="51" stroke-width="1.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19.5 19.5l12 12M19.5 31.5l12-12"></path>
      </svg>
    </button>
  </div>
  <div class="cart-notification__content-area"></div>
</div>
  </div>
  </div>
    
     
	
    <!-- End navigation --> 
    
    
    <!-- Begin content-->
    <section id="content" class="clearfix"> 
<!-- Subscriptions Powered by ReCharge Payments: Begin Liquid Code -->
<!--
	Subscription Cart Footer
	http://rechargepayments.com: v2
	Updated: 2017/06/12
-->




<!-- Subscriptions Powered by ReCharge Payments: End Liquid Code -->
 
 <div id="cart">
  
  <!-- Begin empty cart -->
  
  <div class="row">
    <div class="span12 expanded-message">
      <br>
      <br>
		<div class="text-center">
			<p class="cart--empty-message">Your cart is currently empty.</p>
			<p class="cart__continue-btn">Continue browsing <a href="collections/frontpage.html">here</a>.</p>
		</div>
    </div>
  </div>
  <!-- End empty cart -->
  
  <!-- Begin cart -->
  

 <!-- Pinterest Pixel Code -->
 <script type="text/javascript">
  !function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(
    Array.prototype.slice.call(arguments))};var
    n=window.pintrk;n.queue=[],n.version="3.0";var
    t=document.createElement("script");t.async=!0,t.src=e;var
    r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}
    ("../s.pinimg.com/ct/core.js"); pintrk('load', '2617912368977'); pintrk('page');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none;" alt="" src="https://ct.pinterest.com/v3/?tid=2617912368977&amp;noscript=1" />
  </noscript>
  <script>
        pintrk('track', 'addtocart');
          value: ,
  </script>
  <noscript>
    
    <img height="1" width="1" style="display:none;" alt="" src="https://ct.pinterest.com/v3/?tid=2617912368977&amp;event=addtocart&amp;noscript=1" />
  </noscript>


  <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../connect.facebook.net/en_US/fbevents.js');

fbq('init', '');
fbq('track', "PageView");
fbq('track', 'AddToCart');  
  </script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->
  
  
  <!-- End cart -->
  
</div>
<script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/timerscriptbbb0.js?v=15436917476114328753" type="text/javascript"></script>
<script>
var time_minute=1000/60 ;
var hours = Math.floor( time_minute / 60); 
var minutes = Math.floor(time_minute % 60);

$(function(){
	$('#hm_timer120').countdowntimer({
		hours : hours,
		minutes :minutes,
		seconds :00
	});
});
</script> </section>
    <!-- End content--> 
    </div>
  </div>
</div>





<div id="container">
  <h3 class="press-slider-headline">Where you've seen us</h3>
  <div class="photobanner"> <img class="first" src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-19594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-29594.jpg?4943589227181174883" alt=""> <img  src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-39594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-49594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-59594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-69594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-79594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-89594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-99594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-109594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1121af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1221af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1321af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1421af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-29594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-39594.jpg?4943589227181174883" alt=""> <img  src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-49594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-59594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-69594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-79594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-89594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-99594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/InstyleOctober-2010-Article-reduced-109594.jpg?4943589227181174883" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1121af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1221af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1321af.png?196955278755461801" alt=""> <img src="../cdn.shopify.com/s/files/1/0970/9134/files/1421af.png?196955278755461801" alt=""> </div>
</div>

<script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery.flexslider-mine824.js?v=2744139164469007655" type="text/javascript"></script>

  
    <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery.zoomed15.js?v=709854714963333591" type="text/javascript"></script>
  
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery.tweet9935.js?v=2282783951357590979" type="text/javascript"></script>
  <script src="../cdn.shopify.com/s/files/1/0970/9134/t/10/assets/jquery.fancybox6921.js?v=8922987679262788380" type="text/javascript"></script>
<!--BeginCFFPersistentCartCart-->


<script>
    window.cffPCLiquidPlaced = true
</script>

<!--EndCFFPersistentCartCart--><!-- BEEKETINGSCRIPT CODE START --><!--Liquid error: Could not find asset snippets/bk-tracking.liquid--> <!-- BEEKETINGSCRIPT CODE END -->            

<!-- Subscriptions Powered by ReCharge Payments: Begin Liquid Code -->
<!--
	Subscription Theme Footer
	http://rechargepayments.com: v2
	Updated: 2017/03/23
-->

<!-- Subscriptions Powered by ReCharge Payments: End Liquid Code -->

  

<div class="sweettooth-init"
     data-channel-api-key="pk_DD2aWAJdm5yjjihDj4NappVZ"
     data-external-customer-id=""
     data-customer-auth-digest=""
></div>


  <div class="sweettooth-tab"></div>


<!-- BEGIN: Google Customer Review by Simprosys InfoMedia For Any Assistance on this Code contact support@simprosys.com -->
						<!-- END: Google Customer Review  by Simprosys InfoMedia-->




<!--  -->
<script src="../unpkg.com/%40webcomponents/webcomponentsjs%402.2.4/webcomponents-loader.js" type="application/javascript"></script>
<script defer nomodule src="../widgets.quadpay.com/es5/quadpay-widget-2.2.1.js" type="application/javascript"></script>
<!--  -->
<script async src="../widgets.quadpay.com/quadpay-widget-2.2.1.js" type="application/javascript"></script>




























<style>.ocu-hidden.ocu-hidden.ocu-hidden,.bold_hidden.bold_hidden.bold_hidden{display:none !important}</style>
<script>
!function(){
if (window.performance) {
    const navEntries = window.performance.getEntriesByType && window.performance.getEntriesByType('navigation');
    if (navEntries && navEntries.length > 0 && navEntries[0].type === 'back_forward') {
      location.reload();
    } else if (window.performance.navigation && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
      location.reload();
    }
}

!function(){var e=[];window.Promise||e.push("Promise"),window.URLSearchParams||e.push("URL"),Element.prototype.closest||e.push("Element.prototype.closest"),Array.from||e.push("Array.from"),Object.assign||e.push("Object.assign");try{new Event("event")}catch(t){e.push("Event")}try{Symbol}catch(t){e.push("Symbol")}if(e.length){var t=document.createElement("script");t.src="../cdn.polyfill.io/v3/polyfill.min88bb.js?features="+e.join(",")+"&flags=gated",t.async=!0,document.head.appendChild(t)}Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e}}();

var ajax,utils={store:Object.freeze(new Store),cookie:{options:{expires:86400,path:"/",encodeValue:!1},get:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},set:function(e,t,n){var i=(n=n||this.options).expires;if("number"==typeof i&&i){var r=new Date;r.setTime(r.getTime()+1e3*i),i=n.expires=r}i&&i.toUTCString&&(n.expires=i.toUTCString());var o=e+"="+(t=encodeURIComponent(t));for(var s in n){o+="; "+s;var a=n[s];!0!==a&&(o+="="+a)}document.cookie=o},remove:function(e){this.set(e,null,{expires:-1})}},queryParams:function(e){var t={};return e.replace("?","").split("&").forEach(function(e){var n=e.split("=")[0],i=e.split("=")[1];t[n]=decodeURIComponent(i)}),t},shareableDiscount:function(e){e=e||{};var t=utils.queryParams(location.search)[e.key||"discount"];t&&(utils.cookie.set(e.name||"ocu-share-discount",t,utils.cookie.options),!e.clear||history.pushState(null,null,location.href.replace(/\?.+/,"")))},serializeForm:function(e){return new URLSearchParams(new FormData(e).fd || new FormData(e)).toString()},serializeFormEdge:function(e){var t,n=[];if("object"==typeof e&&"FORM"==e.nodeName){var r=e.elements.length;for(i=0;i<r;i++)if((t=e.elements[i]).name&&!t.disabled&&"file"!=t.type&&"reset"!=t.type&&"submit"!=t.type&&"button"!=t.type)if("select-multiple"==t.type)for(j=e.elements[i].options.length-1;j>=0;j--)t.options[j].selected&&(n[n.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.options[j].value));else("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(n[n.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}return n.join("&").replace(/%20/g,"+")},serialize:function(e,t,n,i){if(this.helpers.isFormData(t)&&(i=n,n=t,t=null),(t=t||{}).indices=t.indices||!1,n=n||new URLSearchParams,this.helpers.isUndefined(e))return n;if(this.helpers.isNull(e))n.append(i,"");else if(this.helpers.isArray(e))if(e.length)e.forEach(function(e,r){var o="object"==typeof e,s=i+"["+(t.indices&&o?r:"")+"]";this.serialize(e,t,n,s)}.bind(this));else{var r=i+"[]";n.append(r,"")}else this.helpers.isDate(e)?n.append(i,e.toISOString()):!this.helpers.isObject(e)||this.helpers.isFile(e)||this.helpers.isBlob(e)?n.append(i,e):Object.keys(e).forEach(function(r){var o=e[r];if(this.helpers.isArray(o))for(;2<r.length&&r.lastIndexOf("[]")===r.length-2;)r=r.substring(0,r.length-2);var s=i?i+"["+r+"]":r;this.serialize(o,t,n,s)}.bind(this));return n},inArray:function(e,t,n){return e.some(function(e){return e[t]===n})},filterObject:function(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})},helpers:{isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isDate:function(e){return e instanceof Date},isBlob:function(e){return e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.slice},isFile:function(e){return this.isBlob(e)&&("object"==typeof e.lastModifiedDate||"number"==typeof e.lastModified)&&"string"==typeof e.name},isFormData:function(e){return e instanceof FormData}}};

window.OCUIncart = {
    cart_items: [],
    cart_products_json: JSON.parse("[]"),
    cart_variants_json: [],
    incarts: {},
    subscription_tags: '',
    proxy_url: '/apps/secure-checkout',
    money_format: '${{amount}}',
    settings: {"popup_frequency":"everytime"},
    option_selection: '//cdn.shopify.com/shopifycloud/shopify/assets/themes_support/option_selection-fe6b72c2bbdd3369ac0bfefe8648e3c889efca213baefd4cfb0dd9363563831f.js',
    is_precheckout: false,

    get tags() {
        const tags = {"post_checkout":["vrmorethan1oil","vreffect","1Free","growbean"],"pre_checkout":[]};
        return tags && tags.pre_checkout.map(function(tag) { return tag.toLowerCase(); });
    },

    get variants() {
        const variants = {"post_checkout":[],"pre_checkout":[]};
        return variants && variants.pre_checkout;
    },

    cartContainsPrecheckoutTriggers: function(collection, productTriggers, product) {
        var self = this;
        let triggers = '';

        collection.forEach(function(trigger) {
          if (!~productTriggers.indexOf(trigger)) return;

          var items = self.cart_items.filter(function(item) {
            return item.product_id === product.id;
          });

          if (items[0]) {
            triggers += items[0].variant_id + ':' + trigger + ',';
          }

          self.is_precheckout = true;
          return triggers

        });

        return triggers
    },

    get triggers() {
        var self = this;
        var triggers = '';

        self.cart_items.forEach(function(item) {
            var product_id = item.product_id;

            self.cart_products_json.forEach(function(product) {
                const productVariants = product.variants && product.variants.map(function(variant) { return variant.id });
                const productTags = product.tags && product.tags.map(function(tag) { return tag.toLowerCase(); });

                if (!productTags) return;
                if (!Array.isArray(self.tags) && !Array.isArray(self.variants)) return;

              	triggers += self.cartContainsPrecheckoutTriggers(self.variants, productVariants, product);
              	triggers += self.cartContainsPrecheckoutTriggers(self.tags, productTags, product);
            })
        });

        return triggers;
    }
};

var lqd = {
    cart: {"note":null,"attributes":{},"original_total_price":0,"total_price":0,"total_discount":0,"total_weight":0.0,"item_count":0,"items":[],"requires_shipping":false,"currency":"USD","items_subtotal_price":0,"cart_level_discount_applications":[]},
    path: '' === 'true' ? 'd56719fefdd75e95ba06caea3d9a3732' : '5965fedc7708e03e1024db4bf2ed5fe6',
    template_name: 'cart',
    shop_currency: 'USD',
    upsellapp_tags: {"post_checkout":["vrmorethan1oil","vreffect","1Free","growbean"],"pre_checkout":[]},
    upsellapp_variants: {"post_checkout":[],"pre_checkout":[]},
    skip_cart: false,
    cart_products_json: JSON.parse("[]"),
    cart_collections_json: [],
    cart_variants_json: [],
    customer_id: "",
    customer: { id: "", email: '' },
    proxy_url: '/apps/secure-checkout',
    permanent_domain: 'www-beanstalkhairgrowth-com.myshopify.com',
    current_domain: 'www.beanstalkhairgrowth.com',
    disabled_by_subscription_app: false,
    subscription_app_enabled: false,
    subscription_products_json: '',
    subscription_variants_json: '',
    subscription_products_size: 0,
    integrate_with_recharge: '' === 'true',
    product: null,
    product_tags: [],
    amazon_pay: '' === 'true',
    themePopup: '' === 'true' || '' === 'true',
    themeSkipCart: '' === 'redirect_checkout'
        || '' === 'true'
        || '' === 'skip_cart',

    get is_precheckout() {
        OCUIncart.triggers;
        return OCUIncart.is_precheckout || OCUIncart.subscription_tags;
    },

    get precheckout_tags() {
        return this.upsellapp_tags.pre_checkout;
    },

    get precheckout_variants() {
        return this.upsellapp_variants.pre_checkout;
    },

    get postcheckout_tags() {
        return this.upsellapp_tags.post_checkout.map(function(tag) { return tag.toLowerCase(); });
    },

    get postcheckout_variants() {
        return this.upsellapp_variants.post_checkout;
    },

    get upsell_cart_include_subscription_upsells() {
        var self = this;

        var hasSubscription = this.product_tags.reduce(function(acc, tag) {
            return acc || ~self.postcheckout_tags.indexOf(tag.toLowerCase());
        }, false);

        return hasSubscription;
    },

    get upsell_cart_include_upsells() {
        var self = this;
        var upsellapp_triggers = {
            pre_checkout: self.precheckout_tags.concat(self.precheckout_variants),
            post_checkout: self.postcheckout_tags.concat(self.postcheckout_variants)
        };

        return self.upsell_cart_include_subscription_upsells || Object.keys(self.upsellapp_tags).reduce(function(acc, key) {
            if (acc) return acc;

            if (!self.cart_products_json.length && self.template_name === 'product') {
                const productVariants = self.product.variants.map(function(variant) { return variant.id });
                const productTags = self.product.tags.map(function(tag) { return tag.toLowerCase(); });

                if (!Array.isArray(self.upsellapp_tags[key])) return false;

                return upsellapp_triggers[key].reduce(function(acc, trigger) {
                    if (acc) return acc;

                    if (typeof trigger === 'number') return !!~productVariants.indexOf(trigger);

                    return !!~productTags.indexOf(trigger.toLowerCase());
                }, false);
            }

            return self.cart_products_json.reduce(function(acc, product) {
                if (acc || !Array.isArray(self.upsellapp_tags[key])) return acc;

                const productVariants = product.variants.map(function(variant) { return variant.id });
                const productTags = product.tags.map(function(tag) { return tag.toLowerCase(); });

                return upsellapp_triggers[key].reduce(function(acc, trigger) {
                    if (acc) return acc;

                    if (typeof trigger === 'number') return !!~productVariants.indexOf(trigger);

                    return !!~productTags.indexOf(trigger.toLowerCase());
                }, false)
            }, false);
        }, false);
    },

    get incarts() {
        return {};
    },
    get is_ajax_precheckout() {
        var isIncarts = Object.keys(this.incarts).some(function(key) {
           return Object.keys(this.incarts[key]).length;
        }.bind(this));

        if (!isIncarts) return;

         var tags = utils.store.get('tags') || [];
         var isIncludes = Array.isArray(lqd.precheckout_tags) && lqd.precheckout_tags.some(function(tag) {
            return ~tags.indexOf(tag);
         });

        return isIncludes;
    },
    get isThemePopupTag() {
        return this.product && this.product.tags.some(function(tag) {
            return /cross-sell-\d/.test(tag);
        });
    },
    get isSkipCartPage() {
        return /index|collection|product/.test(this.template_name);
    },
    get isSkipCartCondition() {
        return (this.skip_cart || this.themeSkipCart) && this.isSkipCartPage && !this.isThemePopupTag;
    }
};

lqd.cart_products_json = lqd.cart_products_json.filter(function(item) {
    return item.handle && !item.error;
});

utils.shareableDiscount({ clear:false });

if (lqd.is_precheckout) requireOptionSelectors();

var ocuCdn="https://cdn07.zipify.com/";!function(){if("cart"===lqd.template_name&&lqd.upsell_cart_include_upsells){var e;e=utils.store.get("fallback").timeout,c=setTimeout(s.bind(null,!0),e),s(!1);var n="https://cdn09.zipify.com/",o=document.createElement("script"),a=document.createElement("link"),c=null;0;var t=document.createElement("script");t.src="https://zipify-ocu.s3.amazonaws.com/ocu/production/assets/"+lqd.path+"/build_number.js?ts="+Date.now(),t.onload=function(){var e=window.OCU_assets_build_number,t=n+"/"+lqd.path+"/assets."+e+".js",c=document.createElement("script");document.head.appendChild(c),c.src=t,c.onload=function(e){var t=window.ocu_precheckout_assets;o.src=t["precheckout.js"],a.href=t["precheckout.css"],l(o,a)}},document.head.appendChild(t)}function l(e,t){e.onload=function(){s(!0),clearTimeout(c)},t.rel="stylesheet",document.head.appendChild(e),document.head.appendChild(t)}function s(t){var e=document.querySelectorAll(utils.store.get("ocuSelectors"));Array.prototype.forEach.call(e,function(e){e.disabled=!t})}}();
function Application() {
    ajax = axios.create({ timeout: 8000 });
    ajax.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

    new PublicMethod();
    new SkipCart();
    new HistoryApi();

    this.setAttributes();
}

Application.prototype = {
    checkout: null,
    ocuSelectors: utils.store.get('ocuSelectors'),
    integrations: new Integrations(),
    helpers: new Helpers(),
    verify: new Verify(),
    cart: new Cart(),

    setAttributes: function() {
        this.integrations.smar7();
        if (
            !lqd.upsell_cart_include_upsells
            && !this.helpers.isOfferProduct()
            && !lqd.integrate_with_recharge && !lqd.subscription_products_size
            && lqd.template_name === 'cart') return;

        const forEach = Array.prototype.forEach;
        const checkoutButtons = document.querySelectorAll(this.ocuSelectors);
        const links = document.querySelectorAll('a'); // for ios

        forEach.call(checkoutButtons, function(item) {
            item.dataset.ocuCheckout = true;
        });

        setTimeout(function() {
            var checkoutBtn = document.querySelector('[data-ocu-checkout]');
            if (checkoutBtn) checkoutBtn.style.display = 'inline-block';
        });

        forEach.call(checkoutButtons, function(item) {
            item.dataset.disableRecharge = true;
        });

        forEach.call(links, function(link) {
            var isNeededHref = utils.store.get('permalink').test(link.href);
            if (isNeededHref) link.dataset.ocuCheckoutLink = true;
        });

        // if (lqd.amazon_pay) {
        //     window.onAmazonLoginReady = this.integrations.amazonPay;
        //     if (window.onAmazonLoginReady && !utils.store.get('amazonPayInitiated')) this.integrations.amazonPay(this);
        // }

        this.listenEvents();
    },

    check: function(event, target) {
        event.preventDefault();
        event.stopPropagation();

        var form = target.closest('[action="/cart"], [action="/checkout"]');
        if (form && !this.validate(form)) {
            clearTimeout(utils.store.get('fallback').id);
            utils.store.set('submitted', false);
            return form.reportValidity();
        }
        if (!utils.store.get('cartChanged')) return this.handle(target);

        utils.store.listen('cartChanged').then(function() {this.handle(target)}.bind(this));
    },

    handle: function(target) {
        this.integrations.discounts();

        if (utils.store.get('checkoutButtonState')) return;
        // if (utils.store.get('submitted')) return; // TODO fix_ff_multi_requests_2384
        utils.store.set('checkoutButtonState', true);

        this.helpers.payPal(target);
        this.verify.init(target);
    },

    init: function(event, target) {
        var self = this;

        if (lqd.template_name === 'cart' && utils.store.get('submitted')) {
            event.stopPropagation();
            return event.preventDefault();
        }
        utils.store.set('submitted', true);

        this.fallbackRedirect();

        if (window.RevyApp) this.handleMonkeyPatching();

        if (!this.allowUpsells(target)) return;

        if (lqd.template_name === 'product' && target.name === 'add' && !target.closest('form[action^="/cart/add"]')) {
            event.preventDefault();
            event.stopPropagation();
            const form = document.querySelector('form[action^="/cart/add"]');
            return form.submit();
        }

        if ((utils.store.get('amazonPayInitiated') || lqd.is_precheckout) && !utils.cookie.get('ocu_shown_popup') && lqd.template_name === 'cart') {
            event.preventDefault();
            event.stopPropagation();
            if (utils.store.get('amazonPayInitiated')) return null;

            const form = target.closest('[action="/cart"], [action="/checkout"]');
            if (form && !this.validate(form)) {
                clearTimeout(utils.store.get('fallback').id);
                utils.store.set('submitted', false);
                return form.reportValidity();
            }

            const isRechargeEnabled = lqd.integrate_with_recharge && !lqd.disabled_by_subscription_app;

            if (!window.OCUPrecheckout) return this.check(event, target);

            const precheckoutConfig = {
                utils: utils,
                Updater: Updater,
                is_recharge_enabled: isRechargeEnabled
            };

            return OCUPrecheckout(precheckoutConfig);
        }

        if (target.dataset.customBuyNow) {
            event.preventDefault();
            event.stopPropagation();

            var id = target.dataset.varientId;
            var qty = target.dataset.itemQuantity;
            var data = { id: id, quantity: qty };
            var handle = function() { self.checkout({ redirect:true }) };
            var onError = function() { alert('Network Error') };

            this.cart.add(null, null, data).then(handle).catch(onError);
        }

        var isIPhone = /iPhone/.test(navigator.userAgent);
        var isSmar7 = window.SMAR7 && SMAR7.bundle_app === 'yes';
        var smar7Modal = document.querySelector('.sm7-popup');
        var needSkipClick = (this.integrations.needSkipClick || isSmar7)
            && !lqd.integrate_with_recharge
            && (event.isTrusted || isIPhone);

        if ((!event.isTrusted || isIPhone) && !smar7Modal) return this.check(event, target);
        if (needSkipClick && this.integrations.list.bold.productUpsell) {
            if (target.name === 'checkout') return this.check(event, target);
        }
        if (!needSkipClick && !isSmar7) return this.check(event, target);
        if (isSmar7 && (!event.isTrusted || isIPhone)) return;

        if (smar7Modal) return this.integrations.smar7();
        else return this.check(event, target);
    },

    validate: function(form) {
        var elems = form.querySelectorAll('[type="text"], [type="checkbox"], select, textarea');

        var requiredElems = Array.prototype.filter.call(elems, function(el) {
            return el && el.required;
        });

        if (!requiredElems.length) return true;

        return !requiredElems.some(function(el) {
            return !el.checkValidity();
        });
    },

    allowUpsells: function(el) {
        if (window.mixed_cart) return; //integration with Recurring Orders & Subscriptions by Bold
        if (window.popup_upsell && !document.querySelector('#upsellclosebtn')) return; // integration with Product Upsell
        if (window.ol_checkout_ok instanceof Function && !ol_checkout_ok()) return; // integration with OrderLogic
        if (el.dataset.zpaSubmitButton === '') return; // integration with ZipifyPages CRM popup

        return true;
    },

    fallbackRedirect: function() {
        var fallback = utils.store.get('fallback');
        fallback.id = setTimeout(function() { this.checkout({ redirect:true }) }.bind(this), fallback.timeout);
        utils.store.set('fallback', fallback);
    },

    handleMonkeyPatching: function() {
        const send = utils.store.get('XHR').send;

        if (XMLHttpRequest.prototype.send !== send) {
            XMLHttpRequest.prototype.send = send;
        }
    },

    handleClick: function(e) {
        if (lqd.template_name === 'page' && !e.isTrusted) return;

        if (e.target.name === 'update' || e.target.closest('[name="update"]')) return;

        if (!lqd.amazon_pay && e.target.closest('form[action^="https://payments.amazon"]')) return;

        if (this.helpers.zpPreventRedirect(e.target)) return;

        if (this.helpers.isBuyNow(e)) return new BuyNow(e);

        if (this.helpers.checkDirectCheckoutButtons(e.target)) {
            e.target.dataset.ocuCheckout = true;
            utils.store.set('redirect_url', '/checkout');
        }

        if (e.target.dataset.ocuCheckoutLink || e.target.closest('[data-ocu-checkout-link]')) {
            e.preventDefault();
            var href = (e.target.dataset.ocuCheckoutLink ? e.target : e.target.closest('[data-ocu-checkout-link]')).href;
            if (utils.store.get('isPermalinkHandling')) return;
            utils.store.set('isPermalinkHandling', true);
            var result = this.integrations.handlePermalink(href, 'redirect');
            return result.promise.then(result.callback);
        }

        if ((e.target.dataset.skipCart === 'true' || e.target.closest('[data-skip-cart]')) && utils.store.get('submitted')) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            return;
        }

        var target = this.helpers.checkSelector(e.target);

        if (target) this.init(e, target);
    },

    handleMousedown: function(e) {
        var self = this;

        if (e.target.dataset.skipCart !== 'true' && !e.target.closest('[data-skip-cart]')) return;

        if (e.target.name === 'update' || e.target.closest('[name="update"]')) return; // 283fa429

        if (this.helpers.zpPreventRedirect(e.target)) return;

        var amazonForm = e.target.closest('form[action^="https://payments.amazon"]');
        if (amazonForm && lqd.amazon_pay) {
            e.preventDefault();
            e.stopPropagation();

            var path = {
                ocu: lqd.proxy_url + '/amazon/forward',
                shopify: amazonForm.querySelector('[name="redirectURL"]').value
            };

            var handle = function() {
                self.checkout()
                    .then(function(res) { location = path[res.status ? 'ocu' : 'shopify'] })
                    .catch(function(res) { location = path.shopify })
            };

            var onError = function(form) {
                form.submit();
            };

            if (!e.target.closest('form[action="/cart/add"]')) return handle();

            var cart = document.querySelector('form[action="/cart/add"]');
            var button = amazonForm.querySelector('[type="submit"]');
            return self.cart.add(cart, button, path).then(handle).catch(onError.bind(null, amazonForm));
        }

        var form = e.target.closest('form[action="/cart/add"]') || document.querySelector('form[action="/cart/add"]');
        var button = e.target.dataset.skipCart === 'true' ? e.target : e.target.closest('[data-skip-cart]');

        if (!form) return;

        e.preventDefault();
        e.stopPropagation();
        utils.store.set('submitted', true);

        var handle = function() { self.checkout({ redirect:true }) };
        var onError = function(form) { form.submit(); };
        return self.cart.add(form, button).then(handle).catch(onError.bind(null, form));
    },

    listenEvents: function() {
        document.addEventListener('mousedown', this.integrations.amazonPay.bind(this), true);
        document.addEventListener('touchstart', this.handleClick.bind(this), true);
        document.addEventListener('click', this.handleClick.bind(this), true);
        window.addEventListener('pagehide', this.helpers.disableButtons);
        window.addEventListener('locationchange', function() {
            document.removeEventListener('click', this.handleClick.bind(this), true);
            document.addEventListener('click', this.handleClick.bind(this), true);
        }.bind(this));

        window.addEventListener('pageshow', function(e) {
            if (e.persisted) location.reload();
            this.helpers.disableButtons();
        }.bind(this));

        // if (lqd.template_name !== 'cart') return;
        // document.addEventListener('mousedown', this.cart.update.bind(this), true);
        // document.addEventListener('change', this.cart.state.bind(this));
    }
};

function amazonPay(e) {
    const self = this;
    const amazonForm = e.target.closest('form[action^="https://payments.amazon"]');

    if (!amazonForm || !lqd.amazon_pay) return;

    e.preventDefault();
    e.stopPropagation();

    utils.store.set('amazonPayInitiated', true);

    const addForm = e.target.closest('form[action="/cart/add"]');
    const path = lqd.proxy_url + '/amazon/forward';

    const getToken = function(url) {
        const escaped = lqd.proxy_url.replace(/\//g, '\\/');
        const reg = new RegExp(escaped + '\\/((?:\\w+[-_]?)+)\\/?');
        const match = reg.exec(url);

        return match && match[1];
    };

    const fallback = function() {
        amazonForm.submit();
    };

    const onSuccess = function(res) {
        if (!res.status) return fallback();

        const token = getToken(res.checkout_url);
        if (!token) return fallback();

        utils.cookie.set('ocu_checkout_token', token);
        location.assign(path);
    };

    if (!addForm) {
        return self.checkout().then(onSuccess).catch(fallback);
    }

    const cart = document.querySelector('form[action="/cart/add"]');
    const button = amazonForm.querySelector('[type="submit"]');

    self.cart.add(cart, button)
        .then(self.checkout)
        .then(onSuccess)
        .catch(fallback);
}

function Bold() {
    this.isBoldRecuring = function() {
        var boldRecurringEl = document.querySelector('[data-bold-recurring]');
        var isBoldRecuring = boldRecurringEl && boldRecurringEl.checked;
        return isBoldRecuring;
    };

    this.upsellPopup = function(target) {
        var modalButtons = [
            target.querySelector('[data-bold-component-id="upsell_continue"]'),
            target.querySelector('[data-bold-component-id="upsell_no_thanks"]'),
            target.querySelector('#bold-modal__btn-close')
        ];

        modalButtons.forEach(function(item) {
            if (!item) return;
            item.addEventListener('click', function(e) {
                setTimeout(function() {
                    self.checkout({ redirect: true });
                }, 500);
            });
        });
    };

    this.initRecurring = function() {
        var clones = document.querySelectorAll('[data-ocu-clone]');
        var clone = Array.prototype.filter.call(clones, function(i) { return i && !i.dataset.ocuCheckout; })[0];
        if (clone) clone.click();
    };

    this.recurring = function(form, token) {
        var cfg = {
            protocol: 'https://',
            host: 'recurringcheckout.com',
            proxy: '/s/',
            permanent: /(\w+)\.myshopify\.com/.exec(BOLD.common.Shopify.shop.permanent_domain)[1],
            path: '/checkout/recurring/',
            query: '?shop_url=' + location.host
        };

        form.action = cfg.protocol + cfg.host + cfg.proxy + cfg.permanent + cfg.path + token + cfg.query;
        form.submit();
    };
}

function BuyNowBtns() {
    if (!lqd.themeSkipCart) return;

    const self = this;

    const buyNowBtn = document.querySelector('button[id="AddToCart"]');
    if (!buyNowBtn) return;

    const innerTextEl = buyNowBtn.querySelector('#AddToCartText');
    if (!/buy\s*(it)?\s*now/i.test(innerTextEl && innerTextEl.innerText)) return;

    const cb = function() { self.checkout({ redirect: true }); };
    const onError = function(form) { form.submit() };

    buyNowBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const form = buyNowBtn.closest('form[action="/cart/add"]');
        self.cart.add(form, e.target).then(cb).catch(onError.bind(null, form));
    });
}

function HandlePermalink(url, redirect) {
    var self = this;
    var reg = utils.store.get('permalink');
    var match = reg.exec(url);
    var cfg = { redirect: redirect };

    if (!match) return {
        promise: new Promise(function(resolve) { resolve({ checkout_url: url }); }),
        callback: function(res) {
            return redirect ? location.assign(url) : new Promise(function(resolve) { resolve(res); })
        }
    };

    var discount = match[2];
    if (discount) cfg.params = [{ discount: discount }];

    var groups = match[1].split(',');

    var data = groups.reduce(function(acc, item, i, arr) {
        var id = +item.split(':')[0];
        var qty = +item.split(':')[1];

        var cartItem = lqd.cart_variants_json.filter(function(item) { return item.id === id })[0];
        if (cartItem) qty += cartItem.quantity;

        if (acc) acc += '&';
        return acc += 'updates[' + id + ']=' + qty;
    }, '');

    return {
        promise: self.cart.bulkAdd(data),
        callback: function() { return self.checkout(cfg); }
    };
}

function CartDrawer(target) {
    var form = target.querySelector('form[action="/cart"]');
    var btn = form && form.querySelector('input[type="submit"]');
    if (!btn) return;

    btn.type = 'button';
    btn.addEventListener('click', function(e) {
        self.checkout({ redirect: true });
    });
}

function CartPopup() {
    var btn = document.querySelector('.bkt--upsell-target-checkout');
    if (!btn) return;

    var cfg = {
        tag: 'input ',
        type: 'type="button" ',
        style: 'style="position:absolute;left:0;top:0;width:100%;height:100%;cursor:pointer;opacity:0" ',
        data: 'data-ocu-dialog-btn '
    };

    btn.style.position = 'relative';
    btn.insertAdjacentHTML('beforeend','<'+cfg.tag+cfg.type+cfg.style+cfg.data+'>');

    var clone = document.querySelector('[data-ocu-dialog-btn]');
    clone.addEventListener('click', function(e) {
        e.stopPropagation();
        btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="bkt--nc-icon" x="0px" y="0px" width="64px" height="15px" viewBox="0 0 64 64"><g><circle class="nc-dots-7-2" data-color="color-2" fill="#445FFF" cx="32" cy="32" r="26" transform="translate(6.26687999999989 6.26687999999989) scale(0.8041600000000034)" style="opacity:0.8041600000000034"></circle><circle class="nc-dots-7-1" fill="#445FFF" cx="-72" cy="32" r="26" transform="translate(3.2332800000000272 12.933120000000109) scale(0.5958399999999966)" style="opacity:0.5958399999999966"></circle><circle class="nc-dots-7-3" fill="#445FFF" cx="132" cy="32" r="26" transform="translate(33.6 19.2) scale(0.4)" style="opacity:0.4"></circle></g></svg>';
        function setAttributes(e,t){for (var i in t)e.setAttribute(i,t[i]);} function dotsSevenStep(e){startDots7||(startDots7=e);var t=e-startDots7,n=Math.min(t/250,4);n=4==n?0:n,decimalRot=n%1,upperInteger=Math.ceil(n),1e3>t||(startDots7+=1e3);if (circleDots7[0][0]){window.requestAnimationFrame(dotsSevenStep);var a=[],r=[],o=[],s=[-72,32,132],c=[32,32,32];for (j = 0;  circleDots7Number > j ; j++) {for (a[0]=a[1]=a[2]=.4,1==upperInteger?(a[0]=1-3*decimalRot/5,a[1]=.4+3*decimalRot/5):2==upperInteger?(a[1]=1-3*decimalRot/5,a[2]=.4+3*decimalRot/5):3==upperInteger?(a[1]=.4+3*decimalRot/5,a[2]=1-3*decimalRot/5):4==upperInteger?(a[0]=.4+3*decimalRot/5,a[1]=1-3*decimalRot/5):a[0]=1,i=0;3>i;i++)r[i]=(1-a[i])*s[i],o[i]=(1-a[i])*c[i],setAttributes(circleDots7[i][j],{
transform: 'translate('+r[i]+' '+o[i]+') scale('+a[i]+')',
style: 'opacity:'+a[i]+';'
});}}}!function(){var e=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),a=window.setTimeout(function(){t(i+n);},n);return e=i+n,a;});}();var circleDots7=[],startDots7=null;circleDots7[0]=document.getElementsByClassName('nc-dots-7-1'),circleDots7[1]=document.getElementsByClassName('nc-dots-7-2'),circleDots7[2]=document.getElementsByClassName('nc-dots-7-3'),circleDots7Number = circleDots7[0].length,window.requestAnimationFrame(dotsSevenStep);
        self.checkout({ redirect: true });
    });
}

function CheckoutLinks() {
    var checkoutLinks = document.querySelectorAll('a[href="/checkout"]');

    Array.prototype.forEach.call(checkoutLinks, function(link) {
        if (!link) return;

        link.addEventListener('click', function(e) {
            e.stopPropagation();
            e.preventDefault();
            self.checkout({ redirect: true });
        });
    });
}

function Discounts() {
    var discount = document.querySelector('input[name="discount"]');
    var discountCC = utils.cookie.get('discount_code'); // integration with CouponCountdown
    var discountShare = utils.cookie.get('ocu-share-discount');
    var isPopupShown = utils.cookie.get('popupcookie');

    if (window._chpmgr && !isPopupShown) return; // integration with chilliapps exit popup
    if (!discount && !discountCC && !discountShare) return;

    var code;
    if (discount) code = discount.value;
    if (discountCC) {
        code = discountCC;
        utils.cookie.remove('discount_code');
    }

    if (discountShare) {
        code = discountShare;
        utils.cookie.remove('ocu-share-discount');
    }

    var param = {
        name: 'discount',
        value: encodeURIComponent(code)
    };

    var params = utils.store.get('params');

    if (discountShare && lqd.template_name === 'page' || !param.value) return; // zp & shareable discount

    params.arr.push(param);
    utils.store.set('params', params);
}

function Recharge() {
    var self = this;

    this.getCheckoutUrl = function(cart) {
        const gaLinker = function() {
            try {
                return '&' + ga.getAll()[0].get('linkerParam');
            } catch (e) {
                return '';
            }
        };

        const customerParams = function() {
            return lqd.customer.id ? '&customer_id=' + lqd.customer.id + '&customer_email=' + lqd.customer.email : '';
        };
        const token = cart.token || utils.cookie.get('cart');
        const url = 'https://checkout.rechargeapps.com/r/checkout?myshopify_domain='
            + lqd.permanent_domain
            + '&cart_token='
            + token
            + gaLinker()
            + customerParams();

        return url;
    };

    this.isSubscription = function(res) {
        var cart = res.cart || res.data.cart || res.data;

        return cart.items.some(function(item) {
            return item.properties && (item.properties.subscription_id || item.properties.shipping_interval_frequency);
        });
    };

    this.processCart = function() {
        window.reChargeProcessCart = function() {
            self.checkout({ redirect: true });
        };
    };

    this.init = function(res, target) {
        var cart = res.cart || res.data.cart || res.data;
        var form = target && target.closest('form');

        var url = (form && form.action === '/cart/add')
            ? '/cart'
            : self.getCheckoutUrl(cart);

        return url;
    }
}

function smar7() {
    var self = this;

    var isSmar7Installed = ~document.head.innerHTML.indexOf('bundle-upsell');
    if (!isSmar7Installed) return;

    var ctaBtns = document.querySelectorAll("[name='checkout'], [href^='/checkout'], form[action='/checkout'] [type='submit'], #checkout, [name='goto_pp'], .checkout_button");
    Array.prototype.forEach.call(ctaBtns, function(btn) {
        btn.disabled = true;
    });

    var i = 0;
    var int = setInterval(function() {
        if ((++i && i > 7) || (window.SMAR7 && SMAR7.bundle)) {
            Array.prototype.forEach.call(ctaBtns, function(btn) {
                btn.disabled = false;
            });
            clearInterval(int);
        }
    }, 3000);

    var redirect = function(discount) {
        var button, path, params = utils.store.get('params');

        if (discount) {
            SMAR7.util.setCookie('smar7coupon', discount, 3600);

            params.arr.push({
                name: 'discount',
                value: encodeURIComponent(discount)
            });
        } else {
            discount = SMAR7.bundle.helper.determineCoupon && SMAR7.bundle.helper.determineCoupon();
        }

        if (SMAR7.paypal) {
            path = '/checkout?goto_pp=paypal_express&discount=' + encodeURIComponent(discount);
            button = document.querySelector('[name="goto_pp"]');
        } else {
            path = '/checkout?discount=' + encodeURIComponent(discount);
            button = document.querySelector(
                '[name="checkout"], [href="/checkout"], form[action="/checkout"] input[type="submit"], #checkout'
            );
        }

        utils.store.set('params', params);
        self.checkout({ redirect: true });
    };

    var handle = function() {
        if (window.SMAR7 && SMAR7.bundle) SMAR7.bundle.redirect = redirect;
    };

    document.addEventListener('click', handle, true);
};

function Integrations() {
    var self = this;
    var bold = new Bold();
    var recharge = new Recharge();

    this.list = {
        bold: {
            get isInstalled() { return window.BOLD && BOLD.apps_installed; },
            get productOptions() { return this.isInstalled && BOLD.apps_installed['Product Options']; },
            get productUpsell() { return this.isInstalled && BOLD.apps_installed['Product Upsell']; },
        },
        recharge: {
            isSubscriptionProduct: function(cart) {
                return cart.items.some(function(item) {
                    return item.properties && (item.properties.subscription_id || item.properties.shipping_interval_frequency);
                });
            }
        }
    };


    // for future integartion
    this.boldUpsellCheckoutOffer = function() {
        if (!window.BOLD || !window.Shopify) return;

        var data  = {
            data: {
                cart: {
                  items: lqd.cart.items,
                  total_price: lqd.cart.total_price
                }
            }
        };

        return ajax.request({
            method: 'post',
            url: window.BOLD.upsell.path + window.Shopify.shop + '/validate_checkout_offer',
            data: JSON.stringify(data)
        });
    };

    this.needSkipClick = this.list.bold.productOptions || this.list.bold.productUpsell;

    this.start = function() {
        if (!lqd.upsell_cart_include_upsells) return;
        if (lqd.template_name !== 'cart') this.main();
        // try {
        //     this[(lqd.template_name === 'cart' ? 'cart' : 'main')]();
        // } catch (e) { console.warn(e); }
    };

    this.main = function() {
        var handleMutation = function(mutation) {
            if (
                mutation.type !== 'attributes'
                || mutation.target !== document.querySelector(self.ocuSelectors)
                || !/cart-?(popup|container|drawer)/i.test(mutation.target.id)
                || !/bold-upsell-modal-window/i.test(mutation.target.id)
            ) return;

            if (mutation.target.id === 'bold-upsell-modal-window') {
                return self.boldUpsellPopup(mutation.target);
            }

            var checkoutButtons = document.querySelectorAll(self.ocuSelectors);
            // var dataOcuCheckoutValue = checkoutButtons[0].dataset.ocuCheckout === 'true';
            var dataDisableRechargeValue = checkoutButtons[0].dataset.disableRecharge === 'true';
            var forEach = Array.prototype.forEach;

            forEach.call(checkoutButtons, function(item) {
                if (item.innerHTML === 'Checkout') item.removeAttribute('onclick'); // Integration with AceCase store
            });

            // if (!dataOcuCheckoutValue) { // Integration with MyDietChief store
            //     Array.prototype.forEach.call(checkoutButtons, function(item) {s
            //         item.dataset.ocuCheckout = true;
            //     });
            // }

            if (lqd.disabled_by_subscription_app && dataDisableRechargeValue) return;

            forEach.call(checkoutButtons, function(item) {
                item.disableRecharge = true;
            });

            self.cartPopup();
            self.cartDrawer(mutation.target);
            self.checkoutLinks();
            self.listenEvents();
        };

        var handleMutations = function(mutations) { mutations.forEach(handleMutation); };

        var config = {
            childList: true,
            subtree: true,
            attributes: true
        };

        new MutationObserver(handleMutations).observe(document, config);

        self.buyNowBtns();
        self.recharge.processCart();
        self.revy();
    };

    // this.cart = function() {
    //     // var handleMutation = function(mutation) {
    //     //     var target = document.querySelector(self.ocuSelectors);
    //     //     if (mutation.type === 'attributes' && mutation.target === target) {
    //     //         self.smar7();
    //     //     }
    //     // };

    //     // var handleMutations = function(mutations) { mutations.forEach(handleMutation); };

    //     // var config = {
    //     //     subtree: true,
    //     //     attributes: true
    //     // };

    //     // new MutationObserver(handleMutations).observe(document, config);

    //     self.revy();
    // };

    this.revy = function() {
        if (window.RevyApp && RevyApp.events) RevyApp.events.updatedCart = [];
    };

    this.discounts = Discounts;
    this.smar7 = smar7;
    this.isBoldRecuring = bold.isBoldRecuring;
    this.boldRecurring = bold.initRecurring;
    this.bold = bold.recurring;
    this.boldUpsellPopup = bold.upsellPopup;
    this.cartPopup = CartPopup;
    this.cartDrawer = CartDrawer;
    this.checkoutLinks = CheckoutLinks;
    this.handlePermalink = window.oneClickUpsellHandlePermalink = HandlePermalink.bind(this);
    this.buyNowBtns = BuyNowBtns;
    this.recharge = recharge;
    this.amazonPay = amazonPay;
    // this.amazonPay = function() { AmazonPay(self) };

    this.start();
}

function HistoryApi() {
    history.pushState = (function(f) {
        return function() {
            var result = f.apply(this, arguments);
            window.dispatchEvent(new Event('pushState'));
            window.dispatchEvent(new Event('locationchange'));
            return result;
        };
    })(history.pushState);

    history.replaceState = (function(f) {
        return function() {
            var result = f.apply(this, arguments);
            window.dispatchEvent(new Event('replaceState'));
            window.dispatchEvent(new Event('locationchange'));
            return result;
        };
    })(history.replaceState);

    window.addEventListener('popstate', function() {
        window.dispatchEvent(new Event('locationchange'));
    });
}

function Verify() {
    var self = this;
    var target;

    this.init = function(target) {
        target = target;

        if (window.catchXHR) {
            catchXHR = false;
            XMLHttpRequest.callbacks = [];
        }
        if (window.beeketingWPJP) beeketingWPJP = {};

        self.checkout()
            .then(self.handle)
            .catch(self.helpers.redirect);
    };

    this.data = function() {
        var options = {
            method: 'get',
            url: self.helpers.getProxyUrl() + utils.store.get('lqdCart')
        };

        return ajax.request(options);
    };

    this.upsells = function(res) {
        if (self.integrations.recharge.isSubscription(res)) {
            var url = self.integrations.recharge.init(res, target);
            utils.store.set('redirect_url', url);
            res.data.redirect_url = url;

            if (!lqd.integrate_with_recharge) {
                return new Promise(function(resolve) { resolve(res); });
            }
        }

        res = self.cart.modify(res);

        const cart = res.data;
        return self._addToken(cart)
            .then(function(c) {
                return self._makeCheckUpsells(c, res);
            });
    };

    this.handle = function(res) {
        // var isAppSkipCart = lqd.skip_cart && /index|collection|product/.test(lqd.template_name);
        // var isThemeSkipCart = lqd.themeSkipCart;
        // if (cart.redirect_url) return location = cart.redirect_url;
        if (!res.status && !lqd.themeSkipCart) return self.helpers.redirect(res);
        // if (!res.status && !lqd.themeSkipCart) return location.assign('/cart');

        location = res.status || lqd.themeSkipCart
            ? res.checkout_url
            : '/cart';
    };

    this._makeCheckUpsells = function(cart, res) {
        cart.items = self.helpers.filterCartItemFields(cart.items);

        const data = {
            shop_domain: lqd.current_domain,
            cart: cart,
            require_paypal: utils.store.get('requirePayPal'),
            customer: { id: res.data.customer_id },
            incarts: utils.store.get('incarts')
            // incarts: { 47: { status: 'declined', shopify_variant_id: 16052480475207, quantity: 1, shown_at: Date.now() }}
            // incarts: { 47: { status: 'offered', shopify_variant_id: 16052480475207, quantity: 1, shown_at: Date.now() }}
        };

        const options = {
            method: 'post',
            url: self.helpers.getProxyUrl() + utils.store.get('checkUpsells'),
            data: utils.serialize(data, { indices: true })
        };

        return ajax.request(options);
    };


    this._addToken = function(cart) {
        const store_token = utils.store.get('cart_token');
        return new Promise(function(resolve, reject) {
            if (!cart.token && store_token) {
                cart.token = store_token;
                resolve(cart);
            } else if (!cart.token) {
                self.cart.get().then(function(res) {
                    cart.token = res.data.token;
                    resolve(cart);
                });
            } else {
                resolve(cart);
            }
        });
    }
};

const appendChain = window.Symbol ? Symbol('appendChain') : 'oneClickUpsellAppendChain';
Object[appendChain]=function(t,o){for(var n=o,e=o2nd=oLast=t instanceof this?t:new t.constructor(t),r=this.getPrototypeOf(o2nd);r!==Object.prototype&&r!==Function.prototype;r=this.getPrototypeOf(o2nd))o2nd=r;return o.constructor===String&&(n=Function.prototype,e=Function.apply(null,Array.prototype.slice.call(arguments,1)),this.setPrototypeOf(e,oLast)),this.setPrototypeOf(o2nd,n),e};

function Updater(res) {
    this.res = res;
    this.cart = res && res.data.cart;
    this.isCartUpdated = utils.store.get('cartUpdated');
    this.isOfferDeclined = utils.store.get('offerDeclined');
    this.options = {
        add:    { method: 'post', url: '/cart/add.js' },
        change: { method: 'post', url: '/cart/change.js' },
        update: { method: 'post', url: '/cart/update.js' }
    };
    this.regs = {
        attributes: /\[(.+?)\]/,
        key: /(?:updates_(?:.*?))?(\d+:\w+)/,
        id: /(?:updates_(?:.*?))?(\d+):?/
    };
    this.selectors = {
        form: 'form[action^="/checkout"], form[action^="/cart"]',
        attributes: '[name^="attributes["]',
        currency: '[name="currency"]',
        updates: '[name^="updates["]',
        note: '[name="note"]'
    };
    this.data = {
        currency: lqd.shop_currency,
        attributes: {},
        lineItems: [],
        updates: {},
        changes: [],
        sameIds: [],
        note: ''
    };
    this.payload = {
        updates: {},
        currency: ''
    };
}
Updater.prototype = {
    init: function() {
        if (this.isCartUpdated && !this.isOfferDeclined) return this.resolve(this.res);
        if (!this.form) return this.updateCurrency();

        this.buildPayload();
        if (this.res) return this.updateCart();
    }
};
const UpdaterRequests = {
    updateCart: function(data, isUpgrade) {
        const options = this._getOptions('update', data, isUpgrade);
        const params = isUpgrade && data.changeData;
        const updateCart = function() { return ajax.request(options); };

        return this._updateSameId(params).then(updateCart);
    },
    addToCart: function(data) {
        const options = this._getOptions('add', data);

        return ajax.request(options);
    },
    changeCart: function(data, chain) {
        const options = this._getOptions('change', data);
        const request = !chain || chain instanceof Object
            ? ajax.request(options)
            : function() { return ajax.request(options); };

        return request;
    },
    updateCurrency: function() {
        if (!this.needCurrencyUpdate) return this.resolve(this.res);

        this.getCurrency();
        const options = this._getOptions('update', { currency: this.data.currency });

        return ajax.request(options).catch(this.resolve.bind(this, this.res));
    },
    _updateSameId: function(changeData) {
        if (!this.data.sameIds.length) return this.resolve(false);

        const allRequests = this._getCartChangeRequests(changeData);
        const requestChain = this._requestChain(allRequests);

        return new Promise(requestChain.bind(this));
    },
    _getCartChangeRequests: function(changeData) {
        const cb = function(acc, change) {
            if (!change.id && !change.line) return acc;
            if (changeData) {
                const id = changeData.id;
                const line = changeData.__line || changeData.line;
                const isUpgradeItem = change.line === line || (id && change.id === id);
                if (isUpgradeItem) return acc;
            }

            delete change.__variantId;
            acc.push(this.changeCart(change, 'chain'));

            return acc;
        };

        return this.data.changes.reduce(cb.bind(this), []);
    },
    _requestChain: function(allRequests) {
        return function(resolve, reject) {
            if (!allRequests.length) return resolve(false);
            !function createRequest() {
                const req = allRequests.pop();
                const cb = function(res) {
                    if (allRequests.length) return createRequest();
                    resolve(res);
                };

                return req().then(cb).catch(reject);
            }();
        }
    },
    _getOptions: function(type, data, isUpgrade) {
        const options = Object.assign({}, this.options[type]);
        options.data = isUpgrade ? data.updateData : (data || this.payload);
        return options;
    }
};
const UpdaterPayload = {
    buildPayload: function() {
        this.getUpdates();
        this.getAttributes();
        this.getCurrency();
        this.getNote();

        Object.keys(this.payload).forEach(function(key) {
            this.payload[key] = this.data[key];
        }.bind(this));

        return this.payload;
    },
    getUpdates: function() {
        this.updateElements.forEach(function(item) {
            const isNoId = !item || (!item.dataset.id && !item.id);
            if (isNoId) return;

            const quantity = +item.value;
            const line = this._getLine(item);
            const key = this._getKey(item);
            const id = this._getId(item);
            const isIdMissing = id.toString().length < 3;

            this._saveLineItem(id, key, line, quantity);
            if (this.data.updates[id] || isIdMissing) this._saveSameId(id);
            this._saveChanges();
            if (~this.data.sameIds.indexOf(id) || isIdMissing) return;
            this._saveUpdates(id, quantity);
        }.bind(this));

        return this.data.updates;
    },
    getAttributes: function() {
        if (!this.attributesElements.length) return {};

        const cb = function(acc, item) {
            const attribute = this._getAttribute(item);
            if (!attribute.key) return acc;

            acc[attribute.key] = attribute.value;
            return acc;
        };

        this.data.attributes = this.attributesElements.reduce(cb.bind(this), {});
        return this.data.attributes;
    },
    getCurrency: function() {
        if (!this.currencyElement) return this.data.currency;
        this.data.currency = this.currencyElement.value;
        return this.data.currency;
    },
    getNote: function() {
        if (!this.noteElement) return '';
        this.data.note = this.noteElement.value;
        return this.data.note;
    }
};
const UpdaterPrecheckout = {
    acceptAddOffer: function(data) {
        return this.updateCart().then(this.addToCart.bind(this, data));
    },
    acceptUpgradeOffer: function(addData, cartItem, cartItemLine) {
        const data = this._getUpgradeOfferData(cartItem, cartItemLine);
        const changeData = Object.assign({}, data.changeData);
        delete changeData.__line;

        return this.updateCart(data, 'upgrade')
            .then(this.changeCart.bind(this, changeData))
            .then(this.addToCart.bind(this, addData));
    },
    _getUpgradeOfferData: function(cartItem, cartItemLine) {
        const udpateData = Object.assign({}, this.payload);
        const lineItemByKey = this.data.lineItems.find(function(item) {
            return item.id === cartItem.key;
        });
        const lineItemById = this.data.lineItems.find(function(item) {
            return item.__variantId === cartItem.id;
        });
        const lineItem = lineItemByKey || lineItemById;
        const quantity = lineItem.quantity ? lineItem.quantity - 1 : 0;
        const changeData = {
            // __line: cartItemLine,
            // id: cartItem.key,
            line: cartItemLine,
            quantity: quantity
        };

        delete udpateData.updates[cartItem.id];

        return {
            updateData: udpateData,
            changeData: changeData
        };
    }
};
const UpdaterElements = {
    get forms() {
        const forms = document.querySelectorAll(this.selectors.form);
        const visibleForms = this.arrayFrom(forms).filter(function(form) {
            return form.offsetHeight;
        });

        return visibleForms;
    },
    get form() {
        const isNotePresent = this.forms.some(function(e) {
            return e.note && e.note.value;
        });
        const filteredForm = this.forms.find(function(form) {
            return form.querySelector(this.selectors.updates) && (isNotePresent ? form.note && form.note.value : true);
        }.bind(this));

        return filteredForm;
    },
    get updateElements() {
        const arr = this.arrayFrom(this.form.querySelectorAll(this.selectors.updates));

        return arr.filter(function(item) {
            return item && !item.disabled;
        });
    },
    get attributesElements() {
        const nodeList = this.form.querySelectorAll(this.selectors.attributes);
        return this.arrayFrom(nodeList);
    },
    get noteElement() {
        return this.form.querySelector(this.selectors.note);
    },
    get currencyElement() {
        return document.querySelector(this.selectors.currency);
    }
};
const UpdaterHelpers = {
    resolve: function(res) {
        return new Promise(function(resolve) { resolve(res); });
    },
    arrayFrom: function(nodeList) {
        if (!(nodeList instanceof NodeList)) nodeList = [nodeList];
        return Array.prototype.slice.call(nodeList);
    },
    _getLine: function(item) {
        return +(item.dataset.quantityItem || item.dataset.lineId);
    },
    _getKey: function(item) {
        const match = this.regs.key.exec(item.dataset.id || item.id);
        return match && match[1];
    },
    _getId: function(item) {
        const match = this.regs.id.exec(item.dataset.id || item.id);
        return match && +match[1];
    },
    _saveSameId: function(id) {
        delete this.data.updates[id];
        this.data.sameIds.push(id);
    },
    _saveLineItem: function(id, key, line, quantity) {
        const lineItem = {
            __variantId: id,
            quantity: quantity,
        };

        if (line) lineItem.line = line;
        else if (key) lineItem.id = key;

        this.data.lineItems.push(lineItem);
    },
    _saveChanges: function() {
        this.data.changes = this.data.lineItems.filter(function(item) {
            return ~this.data.sameIds.indexOf(item.__variantId);
        }.bind(this));
    },
    _saveUpdates: function(id, quantity) {
        this.data.updates[id] = quantity;
    },
    _getAttribute: function(item) {
        const match = this.regs.attributes.exec(item.name);
        if (!match) return {};
        return { key: match[1], value: item.value };
    },
    get needCurrencyUpdate() {
        return this.currencyElement && this.currencyElement.value !== this.data.currency;
    }
};

[UpdaterRequests, UpdaterPayload, UpdaterPrecheckout, UpdaterElements, UpdaterHelpers]
.forEach(function(module) {
    Updater.prototype = Object[appendChain](Updater.prototype, module);
});

function Cart() {
    var self = this;

    this.add = function(form, button, data) {
        if (form) {
            var noId = function(serialized) { return !/id/.test(serialized); };

            data = self.serialize(form);

            if (noId(data)) {
                data = self.serialize(document.querySelector('#AddToCartForm'));
            }

            if (noId(data)) {
                var idOnBtn = document.querySelector('[data-cart-add]');
                if (idOnBtn) data = 'id=' + idOnBtn.dataset.cartAdd;
            }
        }

        var options = {
            method: 'post',
            url: '/cart/add.js',
            data: data
        };

        return ajax.request(options);
    };

    this.bulkAdd = function(data) {
        var options = {
            method: 'post',
            url: '/cart/update.js',
            data: data
        };

        return ajax.request(options)
    };

    this.get = function() {
        var options = {
            method: 'get',
            url: '/cart.js'
        };

        return ajax.request(options);
    };

    this.update = function(res) {
        return new Updater(res).init();
    };

    this.save = function(res) {
        // if (self.needCurrencyUpdate()) self.updateCurrency();
        self.disableMultiUpdate(res.data.cart.items);
        self.saveTags(res);

        // if (!lqd.is_precheckout && lqd.is_ajax_precheckout && !utils.cookie.get('ocu_countdown_start')) {
        //     return window.OCUPrecheckout({ utils: utils });
        // }

        lqd.cart_products_json = res.data.cart_products;
        lqd.cart_collections_json = res.data.cart_collections;
        lqd.subscription_products_json = res.data.subscription_products;
        lqd.subscription_variants_json = res.data.subscription_variants;

        return self.resolve(res);
    };

    this.modify = function(res) {
        const cart = res.cart || res.data.cart || res.data;

        // res.data = self.helpers.filterFields(cart);
        res.data = cart;
        res.data.subscription_products = lqd.subscription_products_json;
        res.data.cart_collections = lqd.cart_collections_json;
        res.data.cart_products = lqd.cart_products_json.filter(function(item) { return !item.error; });
        res.data.customer_id = lqd.customer_id;
        res = self.helpers.addBuyXGetYDiscount(res);
        if (cart.cart_level_discount_applications) res.data.automatic_discount = cart.cart_level_discount_applications[0];

        return res;
    };

    this.serialize = function(form) {
        return /trident|edge/i.test(navigator.userAgent)
            ? utils.serializeFormEdge(form)
            : utils.serializeForm(form);
    };

    this.attrubutes = function(attr) {
        const options = {
            method: 'post',
            url: '/cart/update.js',
            data: { attributes: attr }
        };

        ajax.request(options);
    };

    this.prepareUpdate = function(items) {
        var handle = function(acc, item) {
            var id = item.id.replace(/(\w+_)(\d+)(:\w+)/, '$2');
            acc[id] = item.value;

            return acc;
        };

        items = items.length ? items : [items];

        var updates = Array.prototype.reduce.call(items, handle, {});

        return {
            updates: updates,
            currency: lqd.shop_currency
         };
    };

    this.saveTags = function(res) {
        var tags = res.data.cart_products.reduce(function(acc, product) {
            return acc.concat(product.tags);
        }, []);

        utils.store.set('tags', tags);
    };

    this.disableMultiUpdate = function(lineItems) {
        const inputs = document.querySelectorAll('input[name="updates[]"]');
        const offer = utils.store.get('offer');
        const isAdd = offer === 'add';

        if (isAdd && lineItems.length === inputs.length + 1) return;
        if (!isAdd && lineItems.length === inputs.length) return;

        Array.prototype.forEach.call(inputs, function(input) {
            if (!input.offsetHeight) input.disabled = true;
        });
    };

    this.state = function(e) {
        if (e.target.name !== 'updates[]') return;
        utils.store.set('cartChanged', true);
    };

    this.resolve = function(res) {
        return new Promise(function(resolve) { resolve(res); });
    };

    this.needCurrencyUpdate = function() {
        return document.querySelector('[name="currency"]');
    };

    this.updateCurrency = function() {
        var options = {
            method: 'post',
            url: '/cart/update.js',
            data: { currency: lqd.shop_currency }
        };

        ajax.request(options).then(function() { utils.store.set('cartChanged', false); });
    };

    this.isNotePresent = function(forms) {
        return Array.prototype.some.call(forms, function(e) { return e.note && e.note.value });
    };

    this.filterFormsIfNotes = function(forms, isNotePresent) {
        var handle = function(form) {
            return form['updates[]'] && (isNotePresent ? form.note && form.note.value : true);
        };

        return Array.prototype.filter.call(forms, handle)[0];
    };

    this.error = function(e) {
        var desc = e.data.description;

        if (e.status !== 422) return alert(desc || 'Something went wrong. Please try again.');

        var allInCart = /all/i.test(desc);
        var soldOut = /sold out/i.test(desc);

        alert(desc);

        if (allInCart) return self.checkout({ redirect: true });
        if (soldOut) location.reload();
    };
};

var SyncQtyFields = {
    init: function() {
        if (!lqd.upsell_cart_include_upsells) return;
        if (!this.fields.length) return;
        this.listenEvents();
    },
    get fields() {
        return document.querySelectorAll('[data-quantity-item]');
    },
    getFiledsForUpdate: function(target) {
        var id = this.getId(target);
        var elems = document.querySelectorAll('[data-quantity-item="' + id + '"]');
        var arr = this.getArray(elems);

        return arr;
    },
    getId: function(target) {
        return target.dataset.quantityItem;
    },
    getArray: function(nodeList) {
        return Array.prototype.slice.call(nodeList);
    },
    update: function(target, value) {
        this.getFiledsForUpdate(target).forEach(function(field) {
            field.value = value;
        });
    },
    handle: function(e) {
        this.update(e.target, e.target.value);
    },
    listenEvents: function(e) {
        this.getArray(this.fields).forEach(function(field) {
            field.addEventListener('input', this.handle.bind(this));
        }.bind(this));
    }
}.init();

function SkipCart() {
    var self = this;

    if (lqd.themePopup && lqd.isThemePopupTag) return;
    // if (/product/.test(lqd.template_name) && !lqd.upsell_cart_include_upsells) return;

    this.init = function() {
        var isSkipCartPage = /index|collection|product/.test(lqd.template_name);
        lqd.skip_cart && isSkipCartPage && setTimeout(function() { self.removeEvents(); });
    };

    this.removeEvents = function() {
        let forms = document.querySelectorAll('form[action*="cart"], [data-zp-add-to-cart-form], #AddToCartForm1');
        forms = Array.prototype.filter.call(forms, function(form) { return form.dataset.zpLinkType !== 'zipify_page'; });
        var elems = [];

        var fakeForms = document.querySelectorAll('.product-form__cart');
        // TODO: move selectors to store
        if (fakeForms.length) {
            var getArr = function(nodeList) { return Array.prototype.slice.call(nodeList); };
            forms = getArr(forms).concat(getArr(fakeForms));
        }

        Array.prototype.forEach.call(forms, function(form) {
            var buttons = form.querySelectorAll('*[type="submit"], input[type="button"], button');

            Array.prototype.forEach.call(buttons, function(button) {
                elems.push({
                    button: button,
                    sibling: button.previousElementSibling,
                    parent: button.parentElement
                });
            });
        });

        elems.forEach(function(item) {
            if (item.button.dataset.qty) return;
            if (item.button.getAttribute('aria-controls')) return;
            if (/plus|minus|zpa-quantity/.test(item.button.className)) return;
            if (/error_txt|quantity|sold-out/i.test(item.button.id)) return;
            if (/amount|review/i.test(item.button.value)) return;

            item.button.removeAttribute('onclick');
            item.button.dataset.skipCart = true;
            item.button.type = 'button';

            // try {
            //     item.sibling
            //         ? item.sibling.insertAdjacentHTML('afterend', item.button.outerHTML)
            //         : item.parent.insertAdjacentHTML('afterbegin', item.button.outerHTML);
            // } catch (e) { console.warn(e); }

            // item.button.dataset.ocuClone = true;
            // item.button.classList.add('ocu-hidden');
        });

        self.listenEvents(forms);
    };

    this.onSuccess = function(res) {
        if (self.integrations.recharge.isSubscription(res)) return location = 'cart.html';

        var handle = function(item) { return item.properties && item.properties.frequency_num; };
        utils.store.set('cart_token', res.data.token);

        var isBoldSubscription = res.data.items.some(handle);

        if (!isBoldSubscription) return self.verify.init();

        try {
            self.integrations.bold(form, res.token);
        } catch (e) {
            console.warn(e);
            self.verify.init();
        }
    };

    this.onError = function(form) {
        form.submit();
    };

    this.listenEvents = function(forms) {
        Array.prototype.forEach.call(forms, function(form) {
            var buttons = form.querySelectorAll('[data-skip-cart]');

            Array.prototype.forEach.call(buttons, function(button) {
                button.addEventListener('click', function(e) {
                    if (self.integrations.isBoldRecuring()) {
                        return self.integrations.boldRecurring();
                    }

                    e.stopImmediatePropagation();
                    e.stopPropagation();
                    e.preventDefault();
                    button.disabled = true;

                    if (!button.closest('form')) form = document.querySelector('form[action="/cart/add"]');

                    self.cart.add(form, button)
                        .then(self.cart.get)
                        .then(self.onSuccess)
                        .catch(self.onError.bind(null, form));
                });
            });
        });
    };

    this.init();
}

function BuyNow(e) {
    const self = this;

    if (lqd.themePopup && lqd.isThemePopupTag) return;
    if (!e.isTrusted) return;

    const form = e.target.closest('form[action="/cart/add"]') || document.querySelector('form[action="/cart/add"]');
    if (!form) return;

    e.stopImmediatePropagation();
    e.preventDefault();
    e.target.disabled = true;

    const cb = function() { self.checkout({ redirect: true }) };
    const onError = function(form) { form.submit() };

    self.cart.add(form, e.target).then(cb).catch(onError.bind(null, form));
}

function PublicMethod() {
    var self = this;
    var proto = self.__proto__.__proto__;

    this.init = function() {
        window.oneClickUpsellGetCheckoutUrl = proto.checkout = self.create;
    };

    this.create = function(config) {
        if (config === 'skip_cart') {
            return new Promise(function(resolve) { resolve(lqd.skip_cart); });
        }

        self.prepare(config);
        return self.check();
    };

    this.prepare = function(config) {
        const params = utils.store.get('params');
        self.config = config || {};
        self.config.incarts && utils.store.set('incarts', self.config.incarts);
        self.config.path && utils.store.set('amazonPath', self.config.path);
        self.config.button && self.helpers.payPal(self.config.button);
        self.config.params && self.params();
        self.integrations.discounts();
        self.helpers.params();
        self.handleDeclineOffer(config);

        params.str = params.str ? '?' + params.str : '';
        utils.store.set('params', params);
    };

    this.check = function() {
        return self.verify.data()
            .then(self.cart.save)
            .then(self.cart.update)
            .then(self.verify.upsells)
            .then(self.resolve)
            .catch(self.resolve);
    };

    this.resolve = function(res) {
        const isError = res instanceof Error;
        if (isError) console.log(res);

        res = (isError || !res) ? {} : (res.data || res.response);
        const data = self.build(res);
        utils.store.set('isPermalinkHandling', false);

        if (lqd.integrate_with_recharge && !/\d+/.test(res.status)) {
            return self.rechargeFallback(data);
        }

        return self.config.redirect
            ? self.redirect(data)
            : new Promise(function(resolve) { resolve(data); });
  };

    this.build = function(res) {
        const isEnabled = this._isEnabled(res);
        const params = utils.store.get('params');
        const amazonPath = utils.store.get('amazonPath') && utils.store.get('amazonPath')[isEnabled ? 'ocu' : 'shopify'];

        const result = {
            status: isEnabled,
            checkout_url: (isEnabled ? res.checkout_url : '/checkout') + params.str,
            skip_cart: lqd.skip_cart,
            redirect_url: amazonPath || res.redirect_url || utils.store.get('redirect_url')
        };

        params.str = '';
        utils.store.set('params', params);

        return result;
    };

    this.params = function() {
        var params = utils.store.get('params');

        self.config.params
            .map(function(param) {
                return Object.keys(param).map(function(key) {
                    return {
                        name: encodeURIComponent(key),
                        value: key === 'discount' ? param[key] : encodeURIComponent(param[key])
                    };
                })[0];
            })
            .forEach(function(param) {
                params.arr.push(param);
            });

        utils.store.set('params', params);
    };

    this.getUrl = function(res) {
        if (utils.store.get('amazonPath')) return res.redirect_url;

        if (lqd.integrate_with_recharge) return res.status ? res.checkout_url : res.redirect_url;

        return res.redirect_url || res.checkout_url;
    };

    this.redirect = function(res) {
        location = self.getUrl(res);
    };

    this.rechargeFallback = function(data) {
        return self.cart.get().then(function(cart) {
            if (self.integrations.recharge.isSubscription(cart)) {
                utils.store.set('redirect_url', self.integrations.recharge.getCheckoutUrl(cart.data));
            } else {
                utils.store.set('redirect_url', '/checkout');
            }

            data = self.build(data);

            return self.config.redirect
                ? self.redirect(data)
                : new Promise(function(resolve) { resolve(data); });
        });
    };

    this.handleDeclineOffer = function(config) {
        if (!config || config && !config.incarts) return;

        const isDeclined = Object.keys(config.incarts).some(function(key) {
            return config.incarts[key].status === 'declined';
        });

        utils.store.set('offerDeclined', isDeclined);
    };

    this._isEnabled = function(res) {
        return res.status ? res.status && !/\d+/.test(res.status) : false;
    };

    this.init();
}

function Helpers() {
    var self = this;

    this.disableButtons = function() {
        utils.store.set('checkoutButtonState', false);
    };

    this.params = function() {
        var params = utils.store.get('params');

        for (var i = 0; params.arr.length > i; i++) {
            var reg = new RegExp(params.arr[i].name);
            if (reg.test(params.str)) continue;

            params.str += params.arr[i].name + '=' + params.arr[i].value;
            if (i + 1 !== params.arr.length) params.str += '&';
        }

        utils.store.set('params', params);
    };

    this.redirect = function(res) {
        if (res.redirect_url) return location.assign(res.redirect_url);
        if (!lqd.subscription_products_size) return location.assign(res.checkout_url);

        const form = document.querySelector('form[action="/checkout"], form[action="/cart"]');
        if (!form) return self.checkout({ redirect: true });

        form.submit();
    };

    this.simulateSubmit = function() {
        var checkoutButtons = document.querySelectorAll(self.ocuSelectors);
        if (!checkoutButtons.length) return location = 'cart.html';

        var last = Array.prototype.slice.call(checkoutButtons, -1)[0];
        last.dispatchEvent(new MouseEvent('click'));
    };

    this.simulateDocumentClick = function() {
        var event = new Event('click');
        var target = document.createElement('button');

        target.type = 'submit';
        target.name = 'checkout';
        Object.defineProperty(event, 'target', { value: target });

        document.dispatchEvent(event);
    };

    this.preventMouseDown = function(e) {
        e.preventDefault();
        e.stopPropagation();
        // e.stopImmediatePropagation();
    };

    this.payPal = function(el) {
        if (el.name !== 'goto_pp' || el.value !== 'paypal_express') return;

        var params = utils.store.get('params');

        params.arr.push({
            name: el.name,
            value: el.value
        });

        utils.store.set('requirePayPal', true);
        utils.store.set('params', params);
    };

    this.filterFields = function(cart) {
        var needed_cart_fileds = utils.store.get('neededCartFileds');
        var needed_cart_items_fields = utils.store.get('neededCartItemsFields');

        cart = utils.filterObject(cart, needed_cart_fileds);

        cart.items = cart.items.map(function(item) {
            return utils.filterObject(item, needed_cart_items_fields);
        });

        return cart;
    };

    this.filterCartItemFields = function(items) {
        return items.map(function(item) {
            return Object.keys(item).reduce(function(acc, key) {
                if (key === 'product_description') return acc;
                acc[key] = item[key];
                return acc;
            }, {});
        });
    };

    this.getProxyUrl = function() {
        return lqd.proxy_url || utils.store.get('proxy');
    };

    this.checkSelector = function(target) {
        if (target.dataset.ocuCheckout === 'true') return target;

        const checkoutButtons = document.querySelectorAll(self.ocuSelectors);
        const isInclude = Array.prototype.some.call(checkoutButtons, function(item) {
            return item === target;
        });

        const isCartContentParent = target.closest('.cart_content') && target.closest('form[action="/checkout"] [type="submit"]');
        const isCartTemplate = lqd.template_name === 'cart' && target.closest('form[action="/cart"] [type="submit"]');
        const isCartAction = target.closest(self.ocuSelectors) || isCartContentParent || isCartTemplate;
        const notIncartUpsell = !target.closest('#nudge-offer'); // check if triggered Incart Upsell widget triggered

        const addToCartButton = (lqd.template_name === 'product' && !target.closest('form[action^="/cart/add"]'))
            && (((target.name === 'add' && target.type === 'submit') ? target : null)
            || (target.closest('[name="add"]')) && target.closest('[type="submit"]'));

        const parent = !isInclude
            && (isCartAction || target.closest('[name="checkout"]'))
            || addToCartButton;

        if ((isInclude || parent) && notIncartUpsell) return isInclude ? target : parent;
    };

    this.checkDirectCheckoutButtons = function(target) {
        return /\/checkout/.test(target.onclick && target.onclick.toString())
    };

    this.checkAddToCart = function(target) {
        if (target.closest('form[action="/cart/add"]')) return true;
    };

    this.zpPreventRedirect = function(target) {
        const condition = target.dataset.type === 'crm_dest'
            || target.dataset.zpProductRedirectLink === ''
            || target.dataset.zpAddToCart === ''
            || target.closest('[data-type="crm_dest"]')
            || target.closest('[data-zp-product-redirect-link]')
            || target.closest('[data-zp-add-to-cart]');

        if (condition) return true;
    };

    this.isOfferProduct = function() {
        return lqd.cart_variants_json.some(function(item) {
            return item.properties && item.properties._offer_id;
        });
    };

    this.addBuyXGetYDiscount = function(res) {
        var discounts = res.data.items.reduce(function(acc, variant) {
            if (!variant.discounts[0]) return acc;
            let item = {
                item_key: variant.key,
                discount: variant.discounts,
            };
            if (variant.line_level_discount_allocations[0]) item.discount_data = variant.line_level_discount_allocations;
            acc.push(item);
            return acc;
        }, []);

        if (discounts.length) res.data.per_item_discounts = discounts;
        return res;
    };

    this.isBuyNow = function(e) {
        const selectors = utils.store.get('classList');
        return e.target.classList.contains(selectors.buyNow) && !e.target.classList.contains(selectors.buyNowBranded);
    };
}

[Helpers, Integrations, Verify, Cart, PublicMethod, SkipCart, BuyNow].forEach(function(item) {
    Object.setPrototypeOf(item.prototype, Application.prototype);
});

const script = document.createElement('script');
document.head.appendChild(script);
script.src = ocuCdn + '/axios.min.js';
script.onload = function() {
    if (window.axios) return new Application();
    if (window.require) {
        require([ocuCdn + '/axios.min.js'], function(e) {
            window.axios = e;
            new Application();
        });
    }
};

function requireOptionSelectors() {
    if (window.Shopify && Shopify.OptionSelectors) return;

    const s = document.createElement('script');
    document.head.appendChild(s);
    s.src = OCUIncart.option_selection;
}

function Store() {
    var _private = {
        store: {
            ocuSelectors: '[name="checkout"], [href^="/checkout"], form[action^="/checkout"] [type="submit"], #checkout, [name="goto_pp"], .checkout_button, .checkout-button, [value="Checkout"]',
            addToCartButton: '[name="add"]',
            proxy: '/apps/secure-checkout',
            lqdCart: '/upsellapp_cart',
            checkUpsells: '/check_upsells',
            neededCartFileds: ['token','note','attributes','items', 'currency', 'cart_level_discount_applications'],
            neededCartItemsFields: ['product_id','variant_id','quantity','grams','price','line_price','title','properties','vendor','sku','key'],
            permalink: /cart\/(\d+:\d+(?:,\d+:\d+)*)(?:[?&]discount=([-\w! %205]+))*/,
            isAddToCartClicked: false,
            cartChanged: false,
            cartUpdated: false,
            requirePayPal: false,
            checkoutButtonState: false,
            submitted: false,
            amazonPayInitiated: false,
            redirect_url: null,
            offer: null,
            offerDeclined: false,
            incarts: {},
            tags: [],
            isPermalinkHandling: false,
            cart_token: null,
            classList: {
                buyNow: 'shopify-payment-button__button',
                buyNowBranded: 'shopify-payment-button__button--branded'
            },
            params: {
                str: '',
                arr: []
            },
            fallback: {
                timeout: 15000,
                id: 0
            },
            XHR: {
                send: XMLHttpRequest.prototype.send
            }
        },
        event: function(e) {
            return new Event('store:' + e);
        },
        emit: function(e) {
            document.dispatchEvent(this.event(e));
        }
    };

    this.get = function(key) {
        return _private.store[key];
    };

    this.set = function(key, val) {
        if (!_private.store.hasOwnProperty(key)) return console.error('Unavailable key! ', key);
        _private.emit(key);
        _private.store[key] = val;
    };

    this.listen = function(e) {
        return new Promise(function(resolve) {
            document.addEventListener('store:' + e, resolve);
        });
    };
}

}();
</script>



</body>

<!-- Mirrored from www.beanstalkhairgrowth.com/cart by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 10 Jan 2021 19:46:57 GMT -->
</html>
